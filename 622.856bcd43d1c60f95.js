"use strict";(self.webpackChunkcc_app=self.webpackChunkcc_app||[]).push([[622],{5622:(O,m,r)=>{r.d(m,{U:()=>Y});var v=r(7579),p=r(2722),u=r(7489);class y{constructor(o=null,t=null,i=null,a=[],l="",g=!1){this.requestType=o,this.contentAreaId=t,this.courseId=i,this.courseIds=a,this.searchText=l,this.isCustom=g}}var n=(()=>{return(s=n||(n={}))[s.LessonName=0]="LessonName",s[s.Unit=1]="Unit",s[s.LessonContent=2]="LessonContent",s[s.AssignedStandards=3]="AssignedStandards",s[s.Content=4]="Content",s[s.Vocabulary=5]="Vocabulary",s[s.Keyword=6]="Keyword",n;var s})(),e=r(5e3),b=r(4375),x=r(9723),C=r(520),w=r(946);let T=(()=>{class s{constructor(t,i){this.http=t,this.config=i}getTargetedSearch(t,i){const a=this.config.getTargetedSearchUrl(i);return this.http.post(a,t)}getTargetedKeywordSearch(t){const i=this.config.getTargetedKeywordSearchURL();return this.http.post(i,t)}getTargetedKeywordSearchV3(t){const i=this.config.getTargetedKeyWordSearchResultv3URL();return this.http.post(i,t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(C.eN),e.LFG(w.E))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var A=r(2059),S=r(9646),h=r(91);let Z=(()=>{class s{constructor(){this.targetdSearchMethods=[new h.y("Lesson Name",n[n.LessonName]),new h.y("Unit",n[n.Unit]),new h.y("Lesson Content",n[n.LessonContent])],this.targetdSearchMethodsForCustom=[new h.y("Content",n[n.Content]),new h.y("Unit",n[n.Unit]),new h.y("Vocabulary",n[n.Vocabulary]),new h.y("Assigned Standards",n[n.AssignedStandards]),new h.y("Keyword",n[n.Keyword])]}getTargetedSearchMethods(t){return(0,S.of)(t?this.targetdSearchMethodsForCustom:this.targetdSearchMethods)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var D=r(8138),U=r(4541),I=r(5095),j=r(3974),f=r(9808),d=r(3075),G=r(7232);function N(s,o){1&s&&(e.TgZ(0,"div",15)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"search.keywordSearch"),""))}function P(s,o){1&s&&(e.TgZ(0,"span",17),e._uU(1," Enter Search By Keyword "),e.qZA())}function L(s,o){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,P,2,0,"span",16),e.qZA()),2&s){e.oxw();const t=e.MAs(11);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function F(s,o){if(1&s&&(e.TgZ(0,"ul")(1,"li")(2,"p")(3,"b"),e._uU(4),e.qZA()(),e.TgZ(5,"p",21)(6,"label",22),e._uU(7,"Gist:"),e.qZA(),e.TgZ(8,"a",23),e._uU(9),e.qZA()(),e.TgZ(10,"p",24)(11,"label",22),e._uU(12,"Lesson:"),e.qZA(),e.TgZ(13,"a",23),e._uU(14),e.qZA()()()()),2&s){const t=o.$implicit;e.xp6(4),e.lnq("",t.ContentAreaName,": ",t.coursename,"; ",t.strandname,""),e.xp6(4),e.MGl("href","/aligned/analysis-report/",t.standardGuid,"",e.LSH),e.xp6(1),e.Oqu(t.standardtext),e.xp6(4),e.MGl("href","/aligned/analysis-report/",t.standardGuid,"",e.LSH),e.xp6(1),e.Oqu(t.lname)}}function M(s,o){if(1&s&&(e.TgZ(0,"div",18)(1,"div",19)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",18),e.YNc(7,F,15,7,"ul",20),e.qZA()()()),2&s){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"search.keywordDescriptionResults")),e.xp6(4),e.Q6J("ngForOf",t.rowData)}}const c=r(8259);let Y=(()=>{class s{constructor(t,i,a,l,g,R,J,K,z){this.router=t,this.standardsService=i,this.searchService=a,this.curriculaService=l,this.targetedSearchMethodService=g,this.notifierService=R,this.loggerService=J,this.spinner=K,this.helperService=z,this.displayType="component",this.loadingPage=!1,this.isCustomSearch=!1,this.searchButtonText="Search",this.ngUnsubscribe=new v.x,this.selectedPublicationId="",this.noSubjectData=!0,this.noSectionData=!0,this.noTargetedSearchMethodData=!0,this.subjects=[],this.sections=[],this.rowData=null,this.selectedMethodName="",this.searchPhraseName="Search Phrase",this.selectedSubjectId="",this.selectedSectionId="",this.selectedTargetedSearchMethodId="Keyword",this.searchPhrase="",this.includeCustomContentAreas=!0,this.gridOptions={rowHeight:30,headerHeight:30,rowSelection:"single",pagination:!0,paginationPageSize:10,overlayNoRowsTemplate:"There are currently no results."}}ngOnInit(){this.createColumnDefs(),this.getSubjects(),"component"==this.displayType&&this.helperService.setPageTitleTranslated("menu.search")}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getSubjects(){this.loadingPage=!0,this.standardsService.getAllSubjects(this.includeCustomContentAreas).pipe((0,p.R)(this.ngUnsubscribe)).subscribe({next:t=>{this.loadingPage=!1,t.length?(this.noSubjectData=!1,this.subjects=u.cloneDeep(t),this.loggerService.log("subjects",this.subjects)):this.noSubjectData=!0},error:t=>{this.noSubjectData=!0,this.loggerService.log(t)}})}getSections(){"*"===u.find(this.subjects,{value:this.selectedSubjectId}).text.charAt(0)?(this.isCustomSearch=!0,this.getCustomSections()):(this.isCustomSearch=!1,this.getAvailableSections())}getCustomSections(){this.loadingPage=!0,this.curriculaService.GetAllCoursesForContentArea(this.selectedSubjectId).pipe((0,p.R)(this.ngUnsubscribe)).subscribe({next:t=>{this.loadingPage=!1,t.length?(this.noSectionData=!1,this.sections=u.cloneDeep(t)):this.noSectionData=!0},error:t=>{this.loadingPage=!1,this.noSectionData=!0}})}getAvailableSections(){this.loadingPage=!0,this.standardsService.getSections(this.selectedPublicationId,this.selectedSubjectId).pipe((0,p.R)(this.ngUnsubscribe)).subscribe({next:t=>{this.loadingPage=!1,t.length?(this.noSectionData=!1,this.sections=u.cloneDeep(t)):this.noSectionData=!0},error:t=>{this.noSectionData=!0,this.loggerService.log(t)}})}searchConfirm(t){t&&this.performSearch(),c("#sysWideSearch-confirm-modal").modal("hide")}performSearchClick(){this.performSearch()}performSearch(){this.searchButtonText="Searching...",this.spinner.show();const t=new y(n[this.selectedTargetedSearchMethodId],""===this.selectedSubjectId?"00000000-0000-0000-0000-000000000000":this.selectedSubjectId,""===this.selectedSectionId?"00000000-0000-0000-0000-000000000000":this.selectedSectionId,[],this.searchPhrase,this.isCustomSearch);this.searchService.getTargetedKeywordSearch(t).pipe((0,p.R)(this.ngUnsubscribe)).subscribe({next:i=>{this.searchButtonText="Search",this.spinner.hide(),i.length?(this.rowData=u.cloneDeep(i),this.loggerService.log("row data"),this.loggerService.log(this.rowData)):this.notifierService.showInfoNotificationTranslated("general.nodatafound")},error:i=>{this.loggerService.log(i)},complete:()=>{this.searchButtonText="Search",this.spinner.hide()}})}createColumnDefs(){this.columnDefs=[{headerName:"View",suppressSorting:!0,cellRenderer:this.viewCellRenderer,maxWidth:100},{headerName:"Unit",field:"unit"},{headerName:"Content Area",field:"contentArea"},{headerName:"Course",field:"course"}]}viewCellRenderer(t){const i=t.data.standardGuid;let a="";return a=""===i||"00000000-0000-0000-0000-000000000000"===i?"<span>N/A</span>":'<button style="padding: 1px 5px;font-size: 12px;line-height: 1.5;border-radius: 3px;" class="btn btn-outline-primary btn-xs" data-placement="bottom" title="View" data-action-type="view"><i class="fa fa-eye" data-action-type="view" aria-hidden="true"></i> View </button>',a}onRowClicked(t){if(void 0!==t.event.target){const i=t.event.target.getAttribute("data-action-type");if(i){const a=t.data.standardGuid;"view"===i&&window.open("/aligned/analysis-report/"+a,"_blank")}}}onGridReady(t){this.agGridApi=t.api,this.resizeAgGrid(200),window.setTimeout(()=>{this.styleGrid()},500),window.addEventListener("resize",()=>{this.resizeAgGrid(200),this.styleGrid()}),this.styleGrid()}resizeAgGrid(t){this.spinner.show(),setTimeout(()=>{this.agGridApi.sizeColumnsToFit(),this.styleGrid(),this.spinner.hide()},t),window.setTimeout(()=>{this.styleGrid()},500),this.styleGrid()}styleGrid(){c("div.ag-cell-not-inline-editing").css("line-height","30px"),c("div.ag-header-cell.ag-header-cell-sortable").css("padding-left","5px"),c("div.ag-header-cell.ag-header-cell-sortable").css("padding-right","1px"),c("div.ag-header-cell").css("padding-left","5px"),c("div.ag-header-cell").css("padding-right","1px"),c("span.ag-header-cell-text").css("line-height","30px"),c("div.ag-cell.ag-cell-not-inline-editing.ag-cell-with-height.ag-cell-value").css("line-height","30px"),c("div.ag-cell.ag-cell-not-inline-editing.ag-cell-with-height").css("line-height","30px"),c("div.ag-cell.ag-cell-not-inline-editing.ag-cell-with-height").css("padding-left","5px")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(b.F0),e.Y36(x.M),e.Y36(T),e.Y36(A.z),e.Y36(Z),e.Y36(D.l),e.Y36(U.m),e.Y36(I.V),e.Y36(j.W))},s.\u0275cmp=e.Xpm({type:s,selectors:[["cc-shared-search"]],inputs:{paneDisplyMode:"paneDisplyMode",displayType:"displayType"},decls:19,vars:9,consts:[[1,"container"],[1,"row","text-center","mb-4"],["class","col",4,"ngIf"],["name","targetedSearchForm","id","targetedSearchForm","autocomplete","off",3,"ngSubmit"],["targetedSearchForm","ngForm"],[1,"form-group","row"],[1,"col-12"],["type","text","id","txtSearchPhrase","name","txtSearchPhrase","placeholder","Search By Keyword","required","",1,"form-control",3,"ngModel","ngModelChange"],["searchPhraseText","ngModel"],[4,"ngIf"],[1,"form-group","row","mt-3"],[1,"col-2"],["type","submit","name","searchButton",1,"btn","btn-primary",3,"disabled"],["aria-hidden","true",1,"fa","fa-search"],["class","content",4,"ngIf"],[1,"col"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"content"],[1,"row"],[4,"ngFor","ngForOf"],[1,"pl-3"],[2,"color","gray"],["target","_blank",3,"href"],[1,"pl-5"]],template:function(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,N,4,3,"div",2),e.qZA(),e.TgZ(3,"form",3,4),e.NdJ("ngSubmit",function(){return e.CHM(a),e.MAs(4).form.valid&&i.performSearchClick()}),e.TgZ(5,"div",5)(6,"div",6)(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",7,8),e.NdJ("ngModelChange",function(g){return i.searchPhrase=g}),e.qZA(),e.YNc(12,L,2,1,"div",9),e.qZA()(),e.TgZ(13,"div",10)(14,"div",11)(15,"button",12),e._UZ(16,"i",13),e._uU(17),e.qZA()()()(),e.YNc(18,M,8,4,"div",14),e.qZA()}if(2&t){const a=e.MAs(4),l=e.MAs(11);e.xp6(2),e.Q6J("ngIf",null==i.paneDisplyMode),e.xp6(6),e.hij(" ",e.lcZ(9,7,"search.keywordDescriptionieveloc"),""),e.xp6(2),e.Q6J("ngModel",i.searchPhrase),e.xp6(2),e.Q6J("ngIf",a.submitted&&l&&l.invalid),e.xp6(3),e.Q6J("disabled",""===i.searchPhrase),e.xp6(2),e.hij(" ",i.searchButtonText,""),e.xp6(1),e.Q6J("ngIf",i.rowData)}},directives:[f.O5,d._Y,d.JL,d.F,d.Fj,d.Q7,d.JJ,d.On,f.sg],pipes:[G.X$],styles:[""]}),s})()}}]);