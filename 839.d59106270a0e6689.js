"use strict";(self.webpackChunkcc_app=self.webpackChunkcc_app||[]).push([[839],{4164:(W,E,l)=>{l.d(E,{a:()=>U});var U=(()=>{return(u=U||(U={}))[u.Custom=0]="Custom",u[u.Available=1]="Available",u[u.National=2]="National",u[u.State=3]="State",u[u.NonABState=4]="NonABState",U;var u})()},6839:(W,E,l)=>{l.r(E),l.d(E,{MapsModule:()=>wt});var U=l(2011),u=l(4375),e=l(5e3);let B=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-maps"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"maps works!"),e.qZA())},styles:[""]}),n})(),K=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-add-available-map"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"add-available-map works!"),e.qZA())},styles:[""]}),n})();var X=l(8306),r=l(3075),A=l(9808),ee=l(265);function te(n,o){1&n&&e._UZ(0,"option",50),2&n&&e.Q6J("ngValue",o.$implicit)}function ae(n,o){1&n&&e._UZ(0,"option")}function ne(n,o){1&n&&e._UZ(0,"option")}function ie(n,o){1&n&&e._UZ(0,"option")}function se(n,o){1&n&&e._UZ(0,"option")}function oe(n,o){1&n&&e._UZ(0,"option")}function re(n,o){1&n&&e._UZ(0,"option")}let le=(()=>{class n{constructor(){this.mapName="",this.mapType="",this.mapNameError=!1,this.mapDayError=!1,this.mapNameErrorMsg="A valid map name is required",this.mapDayErrorMsg="You must choose an instructional start day",this.selectedDay=0,this.instructionlDays=[],this.stateContentAreaId="",this.stateContentAreas=[],this.districtContentAreaId="",this.nationalContentAreaId="",this.stateCourseId="",this.districtCourseId="",this.nationalCourseId="",this.isContentAreaCustom=!1,this.customContentAreaName=!1,this.customCourseName=!1,this.events=[],this.setCalendarOptions=()=>{this.calendarOptions={initialView:"dayGridMonth",weekends:!1,events:[],dateClick:function(t){console.log("dateClick",t)},eventDidMount:t=>{const a=t.el;if(a){const i=a.closest("td"),s=t.event;console.log(i.innerHTML),i.innerHTML=this.getViewMapTemplate(s),i.addEventListener("click",function(){alert(s.title)})}}}},this.getEventsFromAjax=()=>{this.mockGetEvents().subscribe({next:t=>{this.events=t,this.calendarOptions.events=t},error:t=>{console.log(t)},complete:()=>{}})},this.mockGetEvents=()=>{const t=[{title:"event 1",date:"2022-03-30"},{title:"event 2",date:"2022-03-31"}];return new X.y(i=>{setTimeout(()=>{i.next(t),i.complete()},3e3)})},this.getViewMapTemplate=t=>`<div class="text-right bg-light text-success"> Event Name: ${t.title}</div>`}ngOnInit(){this.setCalendarOptions(),this.getEventsFromAjax()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-create-map"]],decls:115,vars:31,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-3"],[1,"form-group","row"],[1,"col-md-12"],["type","text","placeholder","general.mapName","name","mapName","id","mapName",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","pl-3"],[1,"text-danger"],["name","filter-ca",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"container","row"],[1,"col"],["for","stateStandardsCheckPlanCreate"],["type","radio","id","stateStandardsCheckPlanCreate","name","standardsCheckPlan","autocomplete","off","checked",""],["for","customStandardsCheck"],["type","radio","id","planCustomStandardsCheck","name","standardsCheckPlan","autocomplete","off"],["for","nationalStandardsCheck"],["type","radio","id","planNationalStandardsCheck","name","standardsCheckPlan","autocomplete","off"],["id","stateContentAreaDDL","name","stateContentAreaDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"text-right"],["for","",1,"text-danger","font-italic"],["id","districtContentAreasDDL","name","districtContentAreasDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],["id","nationalContentAreasDDL","name","nationalContentAreasDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],["id","stateCourseDDL","name","stateCourseDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],["id","districtCoursesDDL","name","districtCoursesDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],["id","nationalCoursesDDL","name","nationalCoursesDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"form-check","mt-1","col","align-left"],["type","checkbox","id","contentAreaCheck","name","contentAreaCheck",1,"form-check-input",3,"ngModel"],["contentAreaCustomCheck","ngModel"],["for","contentAreaCheck",1,"form-check-label"],["type","text","name","customContentArea","placeholder","general.customContentAreaName","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["customContentArea","ngModel"],[1,"form-text","text-danger"],["type","checkbox","id","courseCheck","name","courseCheck",1,"form-check-input",3,"ngModel"],["courseCustomCheck","ngModel"],["for","courseCheck",1,"form-check-label"],["type","text","name","CustomCourse","placeholder","general.customCourseName","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["customCourse","ngModel"],["type","text","value","","placeholder","maps.mapType","name","mapType","id","mapType",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","text-left","pr-2","col-md-12"],["type","checkbox","id","isPvtMap","name","isPvtMap",3,"checked"],["for","isPvtMap",1,"form-check-label"],[1,"form-group","col-md-12"],["name","cancelButton","type","button",1,"btn","btn-danger","pull-right",3,"disabled"],["name","saveButton","type","button",1,"btn","btn-primary","mr-2","pull-right",3,"disabled"],[1,"col-md-7"],[3,"options"],[3,"ngValue"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form")(4,"div",3)(5,"div",4)(6,"input",5),e.NdJ("ngModelChange",function(s){return a.mapName=s}),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"span",7),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",4)(11,"select",8),e.NdJ("ngModelChange",function(s){return a.selectedDay=s}),e.TgZ(12,"option",9),e._uU(13,"--maps.selectDay--"),e.qZA(),e.YNc(14,te,1,1,"option",10),e.qZA(),e.TgZ(15,"div",6),e._UZ(16,"span",7),e.qZA()()(),e.TgZ(17,"div",11)(18,"div",12)(19,"label",13),e._uU(20,"general.state "),e._UZ(21,"input",14),e.qZA()(),e.TgZ(22,"div",12)(23,"label",15),e._uU(24,"general.district "),e._UZ(25,"input",16),e.qZA()(),e.TgZ(26,"div",12)(27,"label",17),e._uU(28," general.national "),e._UZ(29,"input",18),e.qZA()()(),e.TgZ(30,"div",3)(31,"div",4)(32,"select",19),e.NdJ("ngModelChange",function(s){return a.stateContentAreaId=s}),e.TgZ(33,"option",20),e._uU(34,"-- general.selectContentArea--"),e.qZA(),e.YNc(35,ae,1,0,"option",21),e.qZA(),e.TgZ(36,"div",22)(37,"label",23),e._uU(38,"standardPane.noContentAreaFound"),e.qZA()()()(),e.TgZ(39,"div",3)(40,"div",4)(41,"select",24),e.NdJ("ngModelChange",function(s){return a.districtContentAreaId=s}),e.TgZ(42,"option",20),e._uU(43,"--general.selectContentArea--"),e.qZA(),e.YNc(44,ne,1,0,"option",21),e.qZA(),e.TgZ(45,"div",22)(46,"label",23),e._uU(47,"standardPane.noContentAreaFound"),e.qZA()()()(),e.TgZ(48,"div",3)(49,"div",4)(50,"select",25),e.NdJ("ngModelChange",function(s){return a.nationalContentAreaId=s}),e.TgZ(51,"option",20),e._uU(52,"--general.selectContentArea--"),e.qZA(),e.YNc(53,ie,1,0,"option",21),e.qZA(),e.TgZ(54,"div",22)(55,"label",23),e._uU(56,"standardPane.noContentAreaFound"),e.qZA()()()(),e.TgZ(57,"div",3)(58,"div",4)(59,"select",26),e.NdJ("ngModelChange",function(s){return a.stateCourseId=s}),e.TgZ(60,"option",20),e._uU(61,"--general.selectCourse--"),e.qZA(),e.YNc(62,se,1,0,"option",21),e.qZA()()(),e.TgZ(63,"div",3)(64,"div",4)(65,"select",27),e.NdJ("ngModelChange",function(s){return a.districtCourseId=s}),e.TgZ(66,"option",20),e._uU(67,"--general.selectCourse --"),e.qZA(),e.YNc(68,oe,1,0,"option",21),e.qZA()()(),e.TgZ(69,"div",3)(70,"div",4)(71,"select",28),e.NdJ("ngModelChange",function(s){return a.nationalCourseId=s}),e.TgZ(72,"option",20),e._uU(73,"--general.selectCourse--"),e.qZA(),e.YNc(74,re,1,0,"option",21),e.qZA()()(),e.TgZ(75,"div",3)(76,"div",4)(77,"div",29),e._UZ(78,"input",30,31),e.TgZ(80,"label",32),e._uU(81," general.customContentArea ? "),e.qZA()(),e.TgZ(82,"input",33,34),e.NdJ("ngModelChange",function(s){return a.customContentAreaName=s}),e.qZA()(),e.TgZ(84,"label",35),e._uU(85,"Custom Content Area is required."),e.qZA()(),e.TgZ(86,"div",3)(87,"div",4)(88,"div",29),e._UZ(89,"input",36,37),e.TgZ(91,"label",38),e._uU(92," general.customCourse ? "),e.qZA()(),e.TgZ(93,"input",39,40),e.NdJ("ngModelChange",function(s){return a.customCourseName=s}),e.qZA()(),e.TgZ(95,"label",35),e._uU(96," Custom Course is required."),e.qZA()(),e.TgZ(97,"div",3)(98,"div",4)(99,"input",41),e.NdJ("ngModelChange",function(s){return a.mapType=s}),e.qZA()()(),e.TgZ(100,"div",3)(101,"div",42),e._UZ(102,"input",43),e.TgZ(103,"label",44),e._uU(104,"maps.private?"),e.qZA()()(),e.TgZ(105,"div",1)(106,"div",45)(107,"button",46),e._uU(108," general.cancel"),e.qZA(),e.TgZ(109,"button",47),e._uU(110," \xa0 plans.addPlans"),e.qZA()()()()(),e.TgZ(111,"div",48)(112,"h1"),e._uU(113,"Full calendar"),e.qZA(),e._UZ(114,"full-calendar",49),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngModel",a.mapName),e.xp6(5),e.Q6J("ngModel",a.selectedDay),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(18),e.Q6J("disabled",!1)("ngModel",a.stateContentAreaId),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(6),e.Q6J("disabled",!1)("ngModel",a.districtContentAreaId),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(6),e.Q6J("disabled",!1)("ngModel",a.nationalContentAreaId),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(6),e.Q6J("disabled",!1)("ngModel",a.stateCourseId),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(3),e.Q6J("disabled",!1)("ngModel",a.districtCourseId),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(3),e.Q6J("disabled",!1)("ngModel",a.nationalCourseId),e.xp6(3),e.Q6J("ngForOf",a.stateContentAreas),e.xp6(4),e.Q6J("ngModel",a.isContentAreaCustom),e.xp6(4),e.Q6J("disabled",!a.isContentAreaCustom)("ngModel",a.customContentAreaName),e.xp6(11),e.Q6J("disabled",!1)("ngModel",a.customCourseName),e.xp6(6),e.Q6J("ngModel",a.mapType),e.xp6(3),e.Q6J("checked",!1),e.xp6(5),e.Q6J("disabled",!1),e.xp6(2),e.Q6J("disabled",!1),e.xp6(5),e.Q6J("options",a.calendarOptions))},directives:[r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,r.EJ,r.YN,r.Kr,A.sg,r.Wl,r.Q7,ee.woE],styles:[""]}),n})(),ce=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-edit-map"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"edit-map works!"),e.qZA())},styles:[""]}),n})();var S=l(7579),L=l(2340),c=l(7489),J=l(4164);class de{constructor(){this.cellType=0,this.districtId="",this.guid="",this.isCustom=!1,this.name="",this.originalValue="",this.originalValueGuid="",this.planType=0,this.standardTypeEnum=J.a.State,this.mapGuids=[],this.userId=""}}var d=l(2722),x=l(6912),I=l(4458),Z=l(8138),pe=l(9723),he=l(2059),D=l(5095),N=l(7232);function me(n,o){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.text)}}function ue(n,o){if(1&n&&(e.TgZ(0,"label",41),e._uU(1),e.ALo(2,"lowercase"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" Please select current ",e.lcZ(2,1,t.modalTitle)," ")}}function ge(n,o){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function fe(n,o){1&n&&(e.TgZ(0,"div",35)(1,"label",47),e._uU(2,"No Content Area found."),e.qZA()())}function _e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"select",42),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().stateContentAreaId=i})("change",function(){return e.CHM(t),e.oxw().getStateCourses()}),e.TgZ(2,"option",43),e._uU(3,"--Select Content Area--"),e.qZA(),e.YNc(4,ge,2,2,"option",44),e.qZA(),e.YNc(5,fe,3,0,"div",45),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.stateContentAreas&&!t.stateContentAreas.length)("ngModel",t.stateContentAreaId),e.uIk("disabled",!!t.mapsModel.isCustom||null),e.xp6(3),e.Q6J("ngForOf",t.stateContentAreas),e.xp6(1),e.Q6J("ngIf",t.stateContentAreas&&!t.stateContentAreas.length)}}function Ce(n,o){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function Me(n,o){1&n&&(e.TgZ(0,"div",35)(1,"label",47),e._uU(2,"No Content Area found."),e.qZA()())}function Te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"select",48),e.NdJ("change",function(){return e.CHM(t),e.oxw().getDistrictCoursesDDLList()})("ngModelChange",function(i){return e.CHM(t),e.oxw().districtContentAreaId=i}),e.TgZ(2,"option",43),e._uU(3,"--Select Content Area--"),e.qZA(),e.YNc(4,Ce,2,2,"option",44),e.qZA(),e.YNc(5,Me,3,0,"div",45),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.districtContentAreas&&!t.districtContentAreas.length)("ngModel",t.districtContentAreaId),e.uIk("disabled",!!t.mapsModel.isCustom||null),e.xp6(3),e.Q6J("ngForOf",t.districtContentAreas),e.xp6(1),e.Q6J("ngIf",t.districtContentAreas&&!t.districtContentAreas.length)}}function ve(n,o){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function be(n,o){1&n&&(e.TgZ(0,"div",35)(1,"label",47),e._uU(2,"No Content Area found."),e.qZA()())}function Ae(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"select",49),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().nationalContentAreaId=i}),e.TgZ(2,"option",43),e._uU(3,"--Select Content Area--"),e.qZA(),e.YNc(4,ve,2,2,"option",44),e.qZA(),e.YNc(5,be,3,0,"div",45),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.nationalContentAreas&&!t.nationalContentAreas.length)("ngModel",t.nationalContentAreaId),e.uIk("disabled",!!t.mapsModel.isCustom||null),e.xp6(3),e.Q6J("ngForOf",t.nationalContentAreas),e.xp6(1),e.Q6J("ngIf",t.nationalContentAreas&&!t.nationalContentAreas.length)}}function Ne(n,o){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function we(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"select",51),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().stateCourseId=i}),e.TgZ(2,"option",43),e._uU(3),e.qZA(),e.YNc(4,Ne,2,2,"option",44),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("hidden",1!==t.mapsModel.cellType),e.xp6(1),e.Q6J("disabled","00000000-0000-0000-0000-000000000000"==t.stateContentAreaId)("ngModel",t.stateCourseId),e.uIk("disabled",!!t.mapsModel.isCustom||null),e.xp6(2),e.hij("--Select ",t.modalTitle,"--"),e.xp6(1),e.Q6J("ngForOf",t.stateCourses)}}function ye(n,o){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function xe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"select",52),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().districtCourseId=i}),e.TgZ(2,"option",43),e._uU(3),e.qZA(),e.YNc(4,ye,2,2,"option",44),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("hidden",1!==t.mapsModel.cellType),e.xp6(1),e.Q6J("ngModel",t.districtCourseId),e.xp6(2),e.hij("--Select ",t.modalTitle,"--"),e.xp6(1),e.Q6J("ngForOf",t.districtCourses)}}function Se(n,o){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function Ze(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"select",53),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().nationalCourseId=i}),e.TgZ(2,"option",43),e._uU(3),e.qZA(),e.YNc(4,Se,2,2,"option",44),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("hidden",1!==t.mapsModel.cellType),e.xp6(1),e.Q6J("ngModel",t.nationalCourseId),e.xp6(2),e.hij("--Select ",t.modalTitle,"--"),e.xp6(1),e.Q6J("ngForOf",t.nationalCourses)}}function De(n,o){if(1&n&&(e.TgZ(0,"label",41),e._uU(1),e.ALo(2,"lowercase"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" Please select new custom ",e.lcZ(2,1,t.modalTitle)," ")}}let ke=(()=>{class n{constructor(t,a,i,s,h,M,w){this.activeModal=t,this.mapService=a,this.notifierService=i,this.standardService=s,this.curriculaService=h,this.spinnerService=M,this.translate=w,this.DEFAULT_GUID_VALUE="00000000-0000-0000-0000-000000000000",this.EMPTY_OPTION_TEXT="<empty-value>",this.isSubmitted=!1,this.isUpdating=!1,this.loadingPage=!0,this.currentItems=[],this.newItems=[],this.maps=[],this.contentAreasMaster=[],this.contentAreas=[],this.contentArea="",this.customName="",this.ngUnsubscribe=new S.x,this.stateContentAreas=[],this.districtContentAreas=[],this.districtCourses=[],this.stateCourses=[],this.nationalContentAreas=[],this.nationalCourses=[],this.stateContentAreaId=this.DEFAULT_GUID_VALUE,this.stateCourseId=this.DEFAULT_GUID_VALUE,this.districtContentAreaId=this.DEFAULT_GUID_VALUE,this.districtCourseId=this.DEFAULT_GUID_VALUE,this.nationalContentAreaId=this.DEFAULT_GUID_VALUE,this.nationalCourseId=this.DEFAULT_GUID_VALUE,this.getGridHeaderMessages=(m,f)=>{m=m.toLowerCase(),f=f.toLowerCase();let T="";return"current"===m&&("content area"===f?T="maps.currentcontentareaisrequ":"course"===f?T="maps.currentcourseisrequired":"map type"===f&&(T="maps.currentmaptypeisrequired")),"new"===m&&("content area"===f?T="maps.newcontentareaisrequired":"course"===f?T="maps.newcourseisrequired":"map type"===f&&(T="maps.newmaptypeisrequired")),"new custom"===m&&("content area"===f?T="maps.newcustomcontentareaisre":"course"===f?T="maps.newcustomcourseisrequire":"map type"===f&&(T="maps.newcustommaptypeisrequir")),this.translate.instant(T)}}ngOnInit(){const t=this.getUser();this.maps=c.cloneDeep(this.componentParent.mapsMaster),this.mapsModel=new de,this.mapsModel.userId=t.id,this.mapsModel.districtId=t.districtId,this.initializePage(),this.getDistrictContentAreaDDLListAll(!0),this.getStateContentAreaDDLListAll(!0),this.getNationalContentAreaDDLListAll(!0),this.getNationalCoursesDDLListAll(!0),$("#stateStandardsCheckPlanCreate").prop("checked",!0),this.changeStandardType(3)}updateData(){this.isSubmitted=!0;let t=[];const a=c.cloneDeep(this.mapsModel);if(this.standardTypeEnum===J.a.Available||this.standardTypeEnum===J.a.State?0===a.cellType?(t=c.cloneDeep(this.stateContentAreas),a.guid=this.stateContentAreaId):1===a.cellType&&(t=c.cloneDeep(this.stateCourses),a.guid=this.stateCourseId):this.standardTypeEnum===J.a.Custom?0===a.cellType?(t=c.cloneDeep(this.districtContentAreas),a.guid=this.districtContentAreaId):1===a.cellType&&(t=c.cloneDeep(this.districtCourses),a.guid=this.districtCourseId):this.standardTypeEnum===J.a.National&&(0===a.cellType?(t=c.cloneDeep(this.nationalContentAreas),a.name=this.nationalContentAreaId):1===a.cellType&&(t=c.cloneDeep(this.nationalCourses),a.name=this.nationalCourseId)),a.originalValueGuid===this.DEFAULT_GUID_VALUE)a.originalValue="",a.originalValueGuid=this.DEFAULT_GUID_VALUE;else{a.originalValue="";const s=c.find(this.currentItems,["value",a.originalValueGuid]);if(s)a.originalValue=s?s.text:"";else{const h=c.find(this.currentItems,["text",a.originalValueGuid]);a.originalValueGuid=this.DEFAULT_GUID_VALUE,a.originalValue=h?h.text:""}}if(a.isCustom)a.name=this.customName,a.guid=this.DEFAULT_GUID_VALUE;else{const s=c.find(t,["value",a.guid]);a.name=s?s.text:""}a.standardTypeEnum=this.standardTypeEnum,a.mapGuids=this.modalData.mapGuids;const i=this.validateForm(a);i.length?this.notifierService.showNotification("error",this.translate.instant("general.error"),i.join("<br>")):(this.isUpdating=!0,this.mapService.updatePropertyForAll(a).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(s=>{s?(this.notifierService.showSuccessNotificationTranslated(""),this.notifierService.showNotification("success","Success",`${this.modalTitle} updated.`),this.componentParent.getMaps(),this.activeModal.close()):(this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error",`${this.modalTitle} update failed.`)),this.isUpdating=!1},s=>{this.isUpdating=!1,this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error",`${this.modalTitle} update failed.`),this.isUpdating=!1}))}onCustomCheckChanged(t){const a=t;if(this.mapsModel.isCustom=a.checked,a.checked)switch(this.mapsModel.cellType){case 0:this.mapsModel.guid="";break;case 1:this.contentArea="",this.mapsModel.guid="",this.newItems=[]}else this.customName=""}contentAreaOnChange(){this.contentArea?this.getCourses():this.newItems=[]}closeModal(){this.activeModal.dismiss()}initializePage(){switch(this.modalData.planType){case"teacher":this.mapsModel.planType=0;break;case"da":case"school":this.mapsModel.planType=1;break;case"sa":this.mapsModel.planType=2}switch(this.modalData.cellType){case"contentAreaName":this.modalTitle="Content Area",this.mapsModel.cellType=0,this.currentItems=this.getCurrentItemsByType("contentAreaGuid","contentAreaName"),this.newItems=c.cloneDeep(this.contentAreasMaster);break;case"courseName":this.modalTitle="Course",this.mapsModel.cellType=1,this.currentItems=this.getCurrentItemsByType("courseGuid","courseName");break;case"mapType":this.modalTitle="Map Type",this.mapsModel.cellType=2,this.mapsModel.isCustom=!0,this.currentItems=this.getCurrentItemsByType("mapType","mapType")}}getCurrentItemsByType(t,a){return c.chain(this.maps).uniqBy(a).map(s=>({text:s[a]&&""!==s[a].trim()?s[a]:this.EMPTY_OPTION_TEXT,value:s[t]?s[t].toString():"type"===t?"":this.DEFAULT_GUID_VALUE})).sortBy("text").uniqBy("text").value()}getUser(){const t=localStorage.getItem("user");return t?JSON.parse(t):null}getCourses(){this.spinnerService.show(),this.standardService.getABOrStateCourse(this.contentArea).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(t=>{this.spinnerService.hide(),t&&t.subjects&&t.subjects.length?this.newItems=c.cloneDeep(t.subjects).map(a=>({value:a.value.toUpperCase(),text:a.text})):(this.newItems=[],this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showErrorNotificationTranslated("No courses found for the content area."))},t=>{this.spinnerService.hide(),this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showErrorNotificationTranslated("Unable to fetch state Courses.")})}validateForm(t){const a=[];return""===t.originalValueGuid&&a.push(this.getGridHeaderMessages(this.modalTitle,"current")),!t.isCustom&&(""===t.guid||t.guid===this.DEFAULT_GUID_VALUE)&&a.push(this.getGridHeaderMessages(this.modalTitle,"new")),t.isCustom&&""===t.name&&a.push(this.getGridHeaderMessages(this.modalTitle,"new custom")),a}changeStandardType(t){this.standardTypeEnum=t}getStateContentAreaDDLListAll(t=!1){this.standardService.getNonFilteredABAndStateSubjectByDistrictID().pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a.length?this.stateContentAreas=a.map(i=>({text:i.text,value:i.value.toUpperCase()})):(this.loadingPage=!1,this.spinnerService.hide(),this.stateContentAreas=[],this.notifierService.showErrorNotificationTranslated(""))},a=>{this.loadingPage=!1,this.spinnerService.hide(),this.stateContentAreas=[],this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Unable to fetch state Content Area.")})}getStateCourses(t=!1){if(1===this.mapsModel.cellType){if(this.stateContentAreaId===this.DEFAULT_GUID_VALUE)return this.notifierService.showErrorNotificationTranslated(""),void this.notifierService.showNotification("error","Error","Choose State Content Area.");this.spinnerService.show(),this.standardService.getABOrStateCourse(this.stateContentAreaId).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a?(this.stateCourses=c.cloneDeep(a.subjects),!1===t&&(this.spinnerService.hide(),this.standardTypeEnum=a.stanardType)):(this.loadingPage=!1,this.spinnerService.hide())},a=>{this.loadingPage=!1,this.spinnerService.hide(),this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showErrorNotificationTranslated("Unable to fetch state courses.")})}}getDistrictContentAreaDDLListAll(t=!1){this.districtContentAreas=[],this.curriculaService.getDistrictContentAreaDDLByDistrictId().pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a.length?(this.districtContentAreas=c.cloneDeep(a),t||(this.loadingPage=!1,this.spinnerService.hide())):t||(this.loadingPage=!1,this.spinnerService.hide())},a=>{this.loadingPage=!1,this.spinnerService.hide(),this.districtContentAreas=[],this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Unable to fetch district Content Area.")})}getDistrictCoursesDDLList(t=!1){if(1===this.mapsModel.cellType){if(this.districtContentAreaId===this.DEFAULT_GUID_VALUE)return this.notifierService.showErrorNotificationTranslated(""),void this.notifierService.showNotification("error","Error","Choose District Content Area.");this.spinnerService.show(),this.districtCourses=[],this.curriculaService.getDistrictCoursesByContentAreaId(this.districtContentAreaId).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a.length?(this.districtCourses=c.cloneDeep(a),t||(this.loadingPage=!1,this.spinnerService.hide())):t||(this.loadingPage=!1,this.spinnerService.hide())},a=>{this.loadingPage=!1,this.spinnerService.hide(),this.districtCourses=[],this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Unable to fetch district courses.")})}}getNationalContentAreaDDLListAll(t=!1){this.nationalContentAreas=[],this.curriculaService.getNationalContentArea().pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a.length?(this.nationalContentAreas=c.cloneDeep(a).map(i=>({text:i.name,value:i.nationalContentAreaId})),t||(this.loadingPage=!1,this.spinnerService.hide())):t||(this.loadingPage=!1,this.spinnerService.hide())},a=>{this.loadingPage=!1,this.spinnerService.hide(),this.nationalContentAreas=[],this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Unable to fetch national content area.")})}getNationalCoursesDDLListAll(t=!1){1===this.mapsModel.cellType&&(this.nationalCourses=[],this.curriculaService.getNationalCoursesByContentAreaId(this.nationalContentAreaId).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a.length?(this.nationalCourses=c.cloneDeep(a),t||(this.loadingPage=!1,this.spinnerService.hide())):t||(this.loadingPage=!1,this.spinnerService.hide()),this.loadingPage=!1,this.spinnerService.hide()},a=>{this.loadingPage=!1,this.spinnerService.hide(),this.nationalCourses=[],this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Unable to fetch national stateCourses.")}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Kz),e.Y36(I.i),e.Y36(Z.l),e.Y36(pe.M),e.Y36(he.z),e.Y36(D.V),e.Y36(N.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-map-cells"]],inputs:{modalData:"modalData",componentParent:"componentParent"},decls:62,vars:26,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","plan-data-form",3,"ngSubmit"],["planDataForm","ngForm"],[1,"row"],[1,"container","row",3,"hidden"],[1,"col"],["for","stateStandardsCheckPlanCreate"],["type","radio","id","stateStandardsCheckPlanCreate","name","standardsCheckPlan","autocomplete","off","checked","",3,"click"],["for","customStandardsCheck"],["type","radio","id","planCustomStandardsCheck","name","standardsCheckPlan","autocomplete","off",3,"click"],["for","nationalStandardsCheck"],["type","radio","id","planNationalStandardsCheck","name","standardsCheckPlan","autocomplete","off",3,"click"],[1,"form-group"],["for","currentCellValues"],["id","currentCellValues","name","currentCellValues",1,"form-control",3,"ngModel","ngModelChange"],["currentValue","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],[1,"form-group",3,"hidden"],["for","newCellValues"],[4,"ngIf"],["class","pt-3",3,"hidden",4,"ngIf"],[1,"form-check",3,"hidden"],["type","checkbox","id","customCheck","name","customCheck",1,"form-check-input",3,"ngModel","change"],["customCheck","ngModel"],["for","customCheck",1,"form-check-label"],[1,"form-row","mb-1"],["for","newCellValue",3,"hidden"],["type","text","id","newCellValue","name","newCellValue","aria-describedby","newCellValue",1,"form-control",3,"ngModel","ngModelChange"],["newCustomValue","ngModel"],[1,"text-right"],["type","submit","id","updatePlanName",1,"btn","btn-primary","btn-sm",3,"disabled"],["aria-hidden","true",1,"mr-1","fa","fa-save",3,"hidden"],["type","button","id","editPlanName-modal",1,"btn","btn-default",3,"click"],[1,"modal-footer"],[3,"value"],[1,"form-text","text-danger"],["id","stateContentAreaDDL","name","stateContentAreaDDL",1,"form-control",3,"disabled","ngModel","ngModelChange","change"],["value","00000000-0000-0000-0000-000000000000"],[3,"ngValue",4,"ngFor","ngForOf"],["class","text-right",4,"ngIf"],[3,"ngValue"],["for","",1,"text-danger","font-italic"],["id","districtContentAreasDDL","name","districtContentAreasDDL",1,"form-control",3,"disabled","ngModel","change","ngModelChange"],["id","nationalContentAreasDDL","name","nationalContentAreasDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"pt-3",3,"hidden"],["id","stateCourseDDL","name","stateCourseDDL",1,"form-control",3,"disabled","ngModel","ngModelChange"],["id","districtCoursesDDL","name","districtCoursesDDL",1,"form-control",3,"ngModel","ngModelChange"],["id","nationalCoursesDDL","name","nationalCoursesDDL",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.closeModal()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"form",5,6),e.NdJ("ngSubmit",function(){return a.updateData()}),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),e._uU(13,"State "),e.TgZ(14,"input",11),e.NdJ("click",function(){return a.changeStandardType(3)}),e.qZA()()(),e.TgZ(15,"div",9)(16,"label",12),e._uU(17,"District "),e.TgZ(18,"input",13),e.NdJ("click",function(){return a.changeStandardType(0)}),e.qZA()()(),e.TgZ(19,"div",9)(20,"label",14),e._uU(21,"National "),e.TgZ(22,"input",15),e.NdJ("click",function(){return a.changeStandardType(2)}),e.qZA()()()()(),e.TgZ(23,"div",7)(24,"div",9)(25,"div",16)(26,"label",17),e._uU(27),e.qZA(),e.TgZ(28,"select",18,19),e.NdJ("ngModelChange",function(s){return a.mapsModel.originalValueGuid=s}),e.TgZ(30,"option",20),e._uU(31),e.qZA(),e.YNc(32,me,2,2,"option",21),e.qZA(),e.YNc(33,ue,3,3,"label",22),e.qZA()(),e.TgZ(34,"div",9)(35,"div",23)(36,"label",24),e._uU(37),e.qZA(),e.YNc(38,_e,6,5,"div",25),e.YNc(39,Te,6,5,"div",25),e.YNc(40,Ae,6,5,"div",25),e.YNc(41,we,5,6,"div",26),e.YNc(42,xe,5,4,"div",26),e.YNc(43,Ze,5,4,"div",26),e.qZA(),e.TgZ(44,"div",27)(45,"input",28,29),e.NdJ("change",function(s){return a.onCustomCheckChanged(s.target)}),e.qZA(),e.TgZ(47,"label",30),e._uU(48),e.qZA()(),e.TgZ(49,"div",31)(50,"label",32),e._uU(51),e.qZA(),e.TgZ(52,"input",33,34),e.NdJ("ngModelChange",function(s){return a.customName=s}),e.qZA(),e.YNc(54,De,3,3,"label",22),e.qZA(),e.TgZ(55,"div",35)(56,"button",36),e._UZ(57,"i",37),e._uU(58),e.qZA(),e.TgZ(59,"button",38),e.NdJ("click",function(){return a.closeModal()}),e._uU(60,"Close"),e.qZA()()()()()(),e._UZ(61,"div",39)),2&t){const i=e.MAs(29);e.xp6(2),e.hij("Update ",a.modalTitle,""),e.xp6(8),e.Q6J("hidden",2===a.mapsModel.cellType),e.xp6(17),e.hij("Current ",a.modalTitle,""),e.xp6(1),e.Q6J("ngModel",a.mapsModel.originalValueGuid),e.xp6(3),e.hij("--Select ",a.modalTitle,"--"),e.xp6(1),e.Q6J("ngForOf",a.currentItems),e.xp6(1),e.Q6J("ngIf",a.isSubmitted&&""===i.value),e.xp6(2),e.Q6J("hidden",2===a.mapsModel.cellType),e.xp6(2),e.hij("New ",a.modalTitle,""),e.xp6(1),e.Q6J("ngIf",1===a.standardTypeEnum||3===a.standardTypeEnum),e.xp6(1),e.Q6J("ngIf",0===a.standardTypeEnum),e.xp6(1),e.Q6J("ngIf",2===a.standardTypeEnum),e.xp6(1),e.Q6J("ngIf",1===a.standardTypeEnum||3===a.standardTypeEnum),e.xp6(1),e.Q6J("ngIf",0===a.standardTypeEnum),e.xp6(1),e.Q6J("ngIf",2===a.standardTypeEnum),e.xp6(1),e.Q6J("hidden",2===a.mapsModel.cellType),e.xp6(1),e.Q6J("ngModel",a.mapsModel.isCustom),e.xp6(3),e.hij(" Custom ",a.modalTitle,"? "),e.xp6(2),e.Q6J("hidden",2!==a.mapsModel.cellType),e.xp6(1),e.hij("New ",a.modalTitle,""),e.xp6(1),e.Q6J("ngModel",a.customName),e.uIk("disabled",!a.mapsModel.isCustom||null),e.xp6(2),e.Q6J("ngIf",a.isSubmitted&&a.mapsModel.isCustom&&""===a.customName.trim()),e.xp6(2),e.Q6J("disabled",a.isUpdating),e.xp6(1),e.Q6J("hidden",a.isUpdating),e.xp6(1),e.hij(" ",a.isUpdating?"Updating...":"Update"," ")}},directives:[r._Y,r.JL,r.F,r.EJ,r.JJ,r.On,r.YN,r.Kr,A.sg,A.O5,r.Wl,r.Fj],pipes:[A.i8],styles:[""]}),n})(),R=(()=>{class n{constructor(t,a){this.modalService=t,this.translate=a,this.cellTitle="",this.tooltip="",this.sortClass="",this.headerNameContentArea="",this.headerNameCourse="",this.headerNameType="",this.sortIndex=0}agInit(t){this.translate.onLangChange.subscribe(a=>{this.headerNameContentArea=a.translations.general.contentArea,this.headerNameCourse=a.translations.general.course,this.headerNameType=a.translations.general.type}),this.params=t,this.data={cellType:t.cellType,planType:t.planType,contentAreas:t.contentAreas,maps:t.maps,mapGuids:[]},this.translate.get(["general.contentArea","general.course","general.type"]).subscribe(a=>{switch(this.headerNameContentArea=a["general.contentArea"],this.headerNameCourse=a["general.course"],this.headerNameType=a["general.type"],this.data.cellType){case"contentAreaName":this.cellTitle=this.headerNameContentArea;break;case"courseName":this.cellTitle=this.headerNameCourse;break;case"mapType":this.cellTitle=this.headerNameType}}),this.tooltip=`Update ${this.cellTitle}`,t.column.addEventListener("sortChanged",this.onSortChanged.bind(this))}openModal(){const a=this.modalService.open(ke,{size:"sm"});this.data.mapGuids=this.params.context.componentParent.rowData.map(i=>i.mapGuid),a.componentInstance.modalData=this.data,a.componentInstance.componentParent=this.params.context.componentParent}onSortChanged(){this.sortClass=this.params.column.isSortAscending()?"fa fa-sort-desc":this.params.column.isSortDescending()?"fa fa-sort-asc":""}onSortRequested(t){this.sortIndex=0===this.sortIndex?1:0,this.sortType=0===this.sortIndex?"asc":"desc",this.params.setSort(this.sortType,t.shiftKey)}refresh(t){return!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.FF),e.Y36(N.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-contentarea-maps-course-header-cell"]],decls:10,vars:4,consts:[["role","presentation",1,"ag-cell-label-container"],["ref","eMenu","aria-hidden","true",1,"ag-header-icon","ag-header-cell-menu-button",2,"opacity","0","transition","opacity 0.2s ease 0s, border 0.2s ease 0s"],[1,"ag-icon","ag-icon-menu"],["ref","eLabel","role","presentation",1,"ag-header-cell-label"],["ref","eText","role","columnheader",1,"ag-header-cell-text"],[1,"sort-container",3,"click"],[1,"edit-container"],["container","body","placement","bottom","role","button",1,"fa","fa-edit","edit-button",3,"ngbTooltip","click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._UZ(2,"span",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"span",5),e.NdJ("click",function(s){return a.onSortRequested(s)}),e._uU(6),e._UZ(7,"i"),e.qZA(),e.TgZ(8,"span",6)(9,"i",7),e.NdJ("click",function(){return a.openModal()}),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",a.cellTitle," "),e.xp6(1),e.Tol(a.sortClass),e.xp6(2),e.Q6J("ngbTooltip",a.tooltip))},directives:[x._L],styles:[".ag-header-cell-text[_ngcontent-%COMP%]{width:100%}.ag-header-cell-text[_ngcontent-%COMP%]   .sort-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.ag-header-cell-text[_ngcontent-%COMP%]   .edit-container[_ngcontent-%COMP%]{float:right}.edit-button[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;font-weight:400;text-align:center;white-space:nowrap;color:#007bff;background-color:#fff;border-color:#007bff;border-radius:.25rem;padding:2px;margin-left:.5rem}.edit-button[_ngcontent-%COMP%]:hover{font-weight:bolder}  .md-modal .modal-dialog{max-width:600px;width:600px}"]}),n})();var p=l(8114),q=(l(7742),l(2760));l(8259);let Ue=(()=>{class n{constructor(t,a,i,s){this.activeModal=t,this.spinner=a,this.mapService=i,this.notifierService=s,this.mapType="",this.viewMapUrl="",this.editMapUrl="",this.viewTableUrl="",this.ngUnsubscribe=new S.x}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}closeDeleteConfirmModal(){this.activeModal.dismiss()}deleteMap(t){this.spinner.show(),this.mapService.deleteAndRestoreMapByMapGuid(this.modalData.mapGuid,!0,t).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a?(this.notifierService.showSuccessNotificationTranslated(""),this.notifierService.showNotification("success","Success","Map deleted successfully."),this.componentParent.getMaps()):(this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Map deletion failed.")),this.spinner.hide(),this.activeModal.close()},a=>{this.spinner.hide(),this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Map deletion failed."),this.activeModal.close()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Kz),e.Y36(D.V),e.Y36(q.S),e.Y36(Z.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-confirmation-modal"]],inputs:{modalData:"modalData",componentParent:"componentParent"},decls:20,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","id","delete-map",1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["type","button","id","delete-mapAndPlans",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-default",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Delete Map"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.closeDeleteConfirmModal()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4),e._uU(7," Are you sure to delete "),e.TgZ(8,"b"),e._uU(9),e.qZA(),e._uU(10,"?\n"),e.qZA(),e.TgZ(11,"div",5)(12,"button",6),e.NdJ("click",function(){return a.deleteMap(!1)}),e._UZ(13,"i",7),e._uU(14," Delete Map "),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return a.deleteMap(!0)}),e._UZ(16,"i",7),e._uU(17," Delete Map and All Associated Plans "),e.qZA(),e.TgZ(18,"button",9),e.NdJ("click",function(){return a.closeDeleteConfirmModal()}),e._uU(19,"Close"),e.qZA()()),2&t&&(e.xp6(9),e.Oqu(null==a.modalData?null:a.modalData.mapName))},styles:[".md-modal .modal-dialog{max-width:600px;width:600px}"]}),n})(),Fe=(()=>{class n{constructor(t,a,i,s){this.activeModal=t,this.spinner=a,this.mapService=i,this.notifierService=s,this.ngUnsubscribe=new S.x,this.newMapName="",this.setViewForMapType()}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}closeRenameModal(){this.activeModal.dismiss()}renameAndRestore(){this.spinner.show(),this.mapService.checkIfMapNameExists(this.modalData.mapName,this.mapTypeEnum).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(t=>{t?(this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("warning","Warning","Map with the same name exists.")):this.renameAndRestoreMap(),this.spinner.hide()},t=>{this.spinner.hide(),this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Unable to verify if map name exists")})}renameAndRestoreMap(){this.spinner.show(),this.mapService.renameAndRestoreMap(this.modalData.mapGuid,this.newMapName).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(t=>{t?(this.notifierService.showSuccessNotificationTranslated(""),this.notifierService.showNotification("success","Success","Map renamed and restored successfully."),this.componentParent.getMaps()):(this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Map rename and restore failed.")),this.activeModal.close(),this.spinner.hide()},t=>{this.activeModal.close(),this.spinner.hide(),this.notifierService.showErrorNotificationTranslated(""),this.notifierService.showNotification("error","Error","Map rename and restore failed.")})}setViewForMapType(){switch(this.mapType){case"teacher":this.mapTypeEnum=p.T.teacher;break;case"school":this.mapTypeEnum=p.T.school;break;case"da":this.mapTypeEnum=p.T.district;break;case"sa":this.mapTypeEnum=p.T.sysAdmin}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Kz),e.Y36(D.V),e.Y36(q.S),e.Y36(Z.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-rename-and-restore-modal"]],inputs:{mapType:"mapType",modalData:"modalData",componentParent:"componentParent"},decls:20,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-danger"],[1,"fa","fa-exclamation-triangle","mr-1"],[1,"form-group","row"],["for","new-map-name",1,"col-3"],["type","text","name","new-map-name",1,"form-control","col-6",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"confirmation"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.closeRenameModal()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"label",5),e._UZ(8,"i",6),e._uU(9," Map with the same name exists. Add new map name "),e.qZA(),e._UZ(10,"hr"),e.TgZ(11,"div",7)(12,"label",8),e._uU(13,"Map Name: "),e.qZA(),e.TgZ(14,"input",9),e.NdJ("ngModelChange",function(s){return a.newMapName=s}),e.qZA()()(),e.TgZ(15,"div",10)(16,"button",11),e.NdJ("click",function(){return a.renameAndRestore()}),e._uU(17," Rename and Restore "),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return a.closeRenameModal()}),e._uU(19," Cancel "),e.qZA()()),2&t&&(e.xp6(14),e.Q6J("ngModel",a.newMapName),e.xp6(2),e.Q6J("disabled",""===a.newMapName))},directives:[r.Fj,r.JJ,r.On],styles:[""]}),n})();function Je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().openEditMap()}),e._UZ(1,"i",9),e.qZA()}}function Oe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().openEditMapDetailsModal()}),e._UZ(1,"i",11),e.qZA()}}function Ee(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().openViewMap()}),e._UZ(1,"i",13),e.qZA()}}function Le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmDeleteMap()}),e._UZ(1,"i",15),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("hidden",t.data.isArchived)}}function Ie(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmRestoreMap()}),e._UZ(1,"i",17),e.qZA()}}function qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmArchiveMap()}),e.TgZ(1,"i",19),e._uU(2,"archive"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("hidden",t.data.isDeleted)}}function Re(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmUnarchiveMap()}),e.TgZ(1,"i",19),e._uU(2,"unarchive"),e.qZA()()}}const Y=l(8259);let Pe=(()=>{class n{constructor(t,a,i,s,h){this.modalService=t,this.spinner=a,this.mapService=i,this.notifierService=s,this.translate=h,this.viewMapUrl="",this.editMapUrl="",this.viewTableUrl="",this.ngUnsubscribe=new S.x,this.retryCount=0,this.showArchiveStatusMessage=(M,w)=>{let m="";"success"===M&&(m="archive"===w?"maps.maparchivedsuccessfully":"maps.mapunarchivedsuccessfully",this.notifierService.showSuccessNotificationTranslated(m)),"error"===M&&(m="archive"===w?"maps.maparchivefailed":"maps.mapunarchivefailed",this.notifierService.showErrorNotificationTranslated(m))}}agInit(t){this.params=t,this.data=t.data,this.mapType=t.mapType,this.setViewForMapType()}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getEditMapViewModelDA(t){this.spinner.show(),this.mapService.getMapInfoById(t).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{this.retryCount=0,a&&null!==a&&this.saveAsNewModal(a.result),this.spinner.hide()},a=>{this.spinner.hide(),this.retryCount<5?(this.retryCount++,this.getEditMapViewModelDA(t)):this.notifierService.showErrorNotificationTranslated("maps.mapFetchfailed")})}saveAsNewModal(t){const i=this.modalService.open({windowClass:"xl-modal",size:"lg",backdrop:!0});i.componentInstance.modalData=t,i.componentInstance.eventEmitter.pipe((0,d.R)(this.ngUnsubscribe)).subscribe(h=>{h.result&&(this.spinner.show(),this.mapService.updateMapInfo(h.data).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(M=>{this.spinner.hide(),M?(this.notifierService.showSuccessNotificationTranslated("maps.mapupdatedsuccessfully"),this.params.context.componentParent.getMaps()):this.notifierService.showErrorNotificationTranslated("maps.mapupdationfailed")},M=>{this.spinner.hide(),this.notifierService.showErrorNotificationTranslated("maps.mapupdationfailed")}))})}setViewForMapType(){switch(this.mapType){case"teacher":this.mapTypeEnum=p.T.teacher;break;case"school":this.mapTypeEnum=p.T.school;break;case"da":this.mapTypeEnum=p.T.district;break;case"sa":this.mapTypeEnum=p.T.sysAdmin}this.viewMapUrl=`/${this.mapType}/view-map/${this.data.mapGuid}/false`,this.editMapUrl=`/${this.mapType}/edit-map/${this.data.mapGuid}`,this.viewTableUrl=`/${this.mapType}/view-table/${this.data.mapGuid}`}confirmDeleteMap(){const a=this.modalService.open(Ue,{windowClass:"md-modal"});a.componentInstance.modalData=this.data,a.componentInstance.componentParent=this.params.context.componentParent}openEditMapDetailsModal(){this.getEditMapViewModelDA(this.data.mapGuid)}confirmRestoreMap(){this.translate.get("messages.areyousuretorestorevalue",{value:this.data.mapName}).subscribe(t=>{const a=this.translate.instant("maps.restoreMap"),i=t,s=this.translate.instant("general.cancel");this.notifierService.confirm(a,i,a,s,"sm").then(h=>{h&&(this.spinner.show(),this.mapService.checkIfMapNameExists(this.data.mapName,this.mapTypeEnum).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(M=>{if(M){this.notifierService.showErrorNotificationTranslated("maps.mapwiththesamenameexists");const m=this.modalService.open(Fe,{size:"sm"});m.componentInstance.mapType=this.mapType,m.componentInstance.modalData=this.data,m.componentInstance.componentParent=this.params.context.componentParent,this.spinner.hide()}else this.restoreMap()},M=>{this.spinner.hide(),this.notifierService.showErrorNotificationTranslated("plans.unabletoverifyifmapnameex")}))})})}confirmArchiveMap(){this.translate.get("messages.areyousuretoarchivevalue",{value:this.data.mapName}).subscribe(t=>{const a=this.translate.instant("maps.archiveMap"),i=t,s=this.translate.instant("general.cancel");this.notifierService.confirm(a,i,a,s,"sm").then(h=>{h&&this.archiveUnarchiveMap("archive")})})}confirmUnarchiveMap(){this.translate.get("messages.areyousuretounarchivevalu",{value:this.data.mapName}).subscribe(t=>{const a=this.translate.instant("maps.unarchiveMap"),i=t,s=this.translate.instant("general.cancel");this.notifierService.confirm(a,i,a,s,"sm").then(h=>{h&&this.archiveUnarchiveMap("unarchive")})})}openEditMap(){window.location.href=this.editMapUrl}openViewMap(){window.location.href=this.viewTableUrl}restoreMap(){this.spinner.show(),this.mapService.deleteAndRestoreMapByMapGuid(this.data.mapGuid,!1,!0).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(t=>{t?(this.notifierService.showSuccessNotificationTranslated("maps.maprestoresuccessfully"),this.params.context.componentParent.getMaps()):this.notifierService.showErrorNotificationTranslated("maps.maprestorefailed"),this.spinner.hide()},t=>{this.spinner.hide(),this.notifierService.showErrorNotificationTranslated("maps.maprestorefailed")})}archiveUnarchiveMap(t){this.spinner.show(),this.mapService.archiveMapByMapGuid(this.data.mapGuid,!this.data.isArchived).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(a=>{a?(this.showArchiveStatusMessage("success",t),this.params.context.componentParent.getMaps()):this.showArchiveStatusMessage("error",t),this.spinner.hide(),Y("#archive-confirm-modal").modal("hide")},a=>{this.spinner.hide(),this.showArchiveStatusMessage("error",t),Y("#archive-confirm-modal").modal("hide")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.FF),e.Y36(D.V),e.Y36(q.S),e.Y36(Z.l),e.Y36(N.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manage-maps-action-cell"]],decls:8,vars:7,consts:[[1,"text-center"],["role","button","href","javascript:void(0);","class","btn btn-outline-primary action-button","title","Edit Map",3,"click",4,"ngIf"],["role","button","class","btn btn-outline-warning action-button","title","Edit Map Details",3,"click",4,"ngIf"],["role","button","href","javascript:void(0);","class","btn btn-outline-primary action-button","title","View Table",3,"click",4,"ngIf"],["class","btn btn-outline-danger action-button","title","Delete Map",3,"hidden","click",4,"ngIf"],["class","btn btn-outline-primary action-button","title","Restore Map",3,"click",4,"ngIf"],["class","btn btn-outline-warning action-button","title","Archive Map",3,"hidden","click",4,"ngIf"],["class","btn btn-outline-primary action-button","title","Unarchive Map",3,"click",4,"ngIf"],["role","button","href","javascript:void(0);","title","Edit Map",1,"btn","btn-outline-primary","action-button",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["role","button","title","Edit Map Details",1,"btn","btn-outline-warning","action-button",3,"click"],["aria-hidden","true",1,"fa","fa-info"],["role","button","href","javascript:void(0);","title","View Table",1,"btn","btn-outline-primary","action-button",3,"click"],["aria-hidden","true",1,"fa","fa-table"],["title","Delete Map",1,"btn","btn-outline-danger","action-button",3,"hidden","click"],["aria-hidden","true",1,"fa","fa-trash"],["title","Restore Map",1,"btn","btn-outline-primary","action-button",3,"click"],["aria-hidden","true",1,"fa","fa-square-o"],["title","Archive Map",1,"btn","btn-outline-warning","action-button",3,"hidden","click"],["aria-hidden","true",1,"material-icons","md-10"],["title","Unarchive Map",1,"btn","btn-outline-primary","action-button",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Je,2,0,"a",1),e.YNc(2,Oe,2,0,"a",2),e.YNc(3,Ee,2,0,"a",3),e.YNc(4,Le,2,1,"button",4),e.YNc(5,Ie,2,0,"button",5),e.YNc(6,qe,3,1,"button",6),e.YNc(7,Re,3,0,"button",7),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!(a.data.isArchived||a.data.isDeleted)),e.xp6(1),e.Q6J("ngIf",!(a.data.isDeleted||a.data.isArchived)),e.xp6(1),e.Q6J("ngIf",!(a.data.isArchived||a.data.isDeleted)),e.xp6(1),e.Q6J("ngIf",!a.data.isDeleted),e.xp6(1),e.Q6J("ngIf",a.data.isDeleted),e.xp6(1),e.Q6J("ngIf",!a.data.isArchived),e.xp6(1),e.Q6J("ngIf",a.data.isArchived))},directives:[A.O5],styles:[".action-button[_ngcontent-%COMP%]{padding:0 5px;font-size:8px;line-height:1;border-radius:3px}"]}),n})();const Qe=function(n){return[n]};let Ye=(()=>{class n{constructor(){this.viewMapUrl="",this.mapName="",this.ngUnsubscribe=new S.x}agInit(t){this.params=t,this.data=t.data,this.mapType=t.mapType,this.setViewForMapType()}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setViewForMapType(){switch(this.mapType){case"teacher":this.mapTypeEnum=p.T.teacher;break;case"school":this.mapTypeEnum=p.T.school;break;case"da":this.mapTypeEnum=p.T.district;break;case"sa":this.mapTypeEnum=p.T.sysAdmin}this.mapName=this.data.mapName,this.viewMapUrl=`/${this.mapType}/view-map/${this.data.mapGuid}/false`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manage-maps-link-render"]],decls:2,vars:5,consts:[["data-toggle","tooltip","data-placement","bottom",3,"routerLink","title"]],template:function(t,a){1&t&&(e.TgZ(0,"a",0),e._uU(1),e.qZA()),2&t&&(e.Q6J("routerLink",e.VKq(3,Qe,a.viewMapUrl))("title",a.mapName),e.xp6(1),e.Oqu(a.mapName))},directives:[u.yS],styles:[""]}),n})();var Ge=l(5861),G=l(5226),O=l(5439),P=l(3128),He=l(2850),ze=l(9603),H=l(3974),Ve=l(6888),z=l(1761);function je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.TgZ(1,"span",17),e._uU(2,"\xd7"),e.qZA()()}}function We(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"input",20),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().readOnlyLink=i}),e.qZA(),e._UZ(3,"div",21),e.TgZ(4,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.copyMaplinkToClipboard(i.readOnlyLink)}),e._UZ(5,"i",23),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.readOnlyLink),e.xp6(4),e.hij(" ",e.lcZ(7,2,"calendar.copyLink"),"")}}function Be(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"maps.titleisrequired")))}function $e(n,o){if(1&n&&(e.TgZ(0,"div",50),e.YNc(1,Be,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.fc.title.errors.required)}}function Ke(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"general.expirationDateisrequired")))}function Xe(n,o){if(1&n&&(e.TgZ(0,"div",50),e.YNc(1,Ke,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.fc.expirationDate.errors.required)}}function et(n,o){1&n&&e._UZ(0,"option",51),2&n&&e.Q6J("value",o.$implicit)}function tt(n,o){1&n&&e._UZ(0,"option",51),2&n&&e.Q6J("value",o.$implicit)}function at(n,o){1&n&&e._UZ(0,"option",51),2&n&&e.Q6J("value",o.$implicit)}const V=function(n){return{"is-invalid":n}},j=function(n){return{value:n}};function nt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",24)(2,"div",25)(3,"div",26),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",27),e._UZ(7,"input",28),e.ALo(8,"translate"),e.YNc(9,$e,2,1,"div",29),e.qZA(),e.TgZ(10,"div",30),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",31)(14,"input",32),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().endDate=i}),e.qZA(),e.YNc(15,Xe,2,1,"div",29),e.TgZ(16,"input",33),e.NdJ("change",function(i){return e.CHM(t),e.oxw().getLastDayOfSchool(i)}),e.qZA(),e.TgZ(17,"label",34)(18,"b"),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()(),e.TgZ(21,"div",35)(22,"div")(23,"input",36),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().pageFilter.mapName=i})("change",function(i){return e.CHM(t),e.oxw().filterOnChange(i,"mapName")})("keyup",function(i){return e.CHM(t),e.oxw().filterOnKeyUp(i,"mapName")}),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"i",37),e.NdJ("click",function(i){return e.CHM(t),e.oxw().clearSelectedFilter(i,"mapName")}),e.TgZ(26,"span",38),e._uU(27),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"div")(30,"input",39),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().pageFilter.contentAreaName=i})("change",function(i){return e.CHM(t),e.oxw().filterOnChange(i,"contentAreaName")})("keyup",function(i){return e.CHM(t),e.oxw().filterOnKeyUp(i,"contentAreaName")}),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"i",37),e.NdJ("click",function(i){return e.CHM(t),e.oxw().clearSelectedFilter(i,"contentAreaName")}),e.TgZ(33,"span",38),e._uU(34),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"div")(37,"input",40),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().pageFilter.courseName=i})("change",function(i){return e.CHM(t),e.oxw().filterOnChange(i,"courseName")})("keyup",function(i){return e.CHM(t),e.oxw().filterOnKeyUp(i,"courseName")}),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"i",37),e.NdJ("click",function(i){return e.CHM(t),e.oxw().clearSelectedFilter(i,"courseName")}),e.TgZ(40,"span",38),e._uU(41),e.ALo(42,"translate"),e.qZA()()()(),e.TgZ(43,"div",41)(44,"datalist",42),e.YNc(45,et,1,1,"option",43),e.qZA(),e.TgZ(46,"datalist",44),e.YNc(47,tt,1,1,"option",43),e.qZA(),e.TgZ(48,"datalist",45),e.YNc(49,at,1,1,"option",43),e.qZA()(),e.TgZ(50,"div",46)(51,"div")(52,"ag-grid-angular",47),e.NdJ("columnResized",function(i){return e.CHM(t),e.oxw().onColumnResized(i)})("gridReady",function(i){return e.CHM(t),e.oxw().onGridReady(i)})("gridResize",function(i){return e.CHM(t),e.oxw().onGridResize(i)})("rowClicked",function(i){return e.CHM(t),e.oxw().onRowClicked(i)})("sortChanged",function(i){return e.CHM(t),e.oxw().onSortChanged(i)}),e.qZA(),e._UZ(53,"small",48),e.qZA(),e.TgZ(54,"div",13)(55,"ag-grid-angular",49),e.NdJ("gridReady",function(i){return e.CHM(t),e.oxw().onAddedGridReady(i)})("gridResize",function(i){return e.CHM(t),e.oxw().onAddedGridResize(i)})("rowClicked",function(i){return e.CHM(t),e.oxw().onAddedRowClicked(i)})("sortChanged",function(i){return e.CHM(t),e.oxw().onAddedSortChanged(i)}),e.qZA(),e._UZ(56,"small",48),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.sharedForm),e.xp6(3),e.hij("",e.lcZ(5,45,"snapshots.title"),": "),e.xp6(3),e.s9C("placeholder",e.lcZ(8,47,"snapshots.title")),e.Q6J("ngClass",e.VKq(65,V,t.submitted&&t.fc.title.errors)),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.fc.title.errors),e.xp6(2),e.hij("",e.lcZ(12,49,"general.expirationDate"),":"),e.xp6(3),e.Q6J("ngModel",t.endDate)("ngClass",e.VKq(67,V,t.submitted&&t.fc.expirationDate.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.fc.expirationDate.errors),e.xp6(4),e.Oqu(e.lcZ(20,51,"calendar.lastdayofschool")),e.xp6(3),e.Udp("flex-basis",t.columnWidth.mapName,"px"),e.xp6(1),e.MGl("placeholder","--",e.lcZ(24,53,"general.selectMapName"),"--"),e.Q6J("ngModel",t.pageFilter.mapName),e.xp6(2),e.Q6J("hidden",""===t.pageFilter.mapName),e.xp6(2),e.Oqu(e.lcZ(28,55,"general.clearFilters")),e.xp6(2),e.Udp("flex-basis",t.columnWidth.contentAreaName,"px"),e.xp6(1),e.MGl("placeholder","--",e.lcZ(31,57,"general.selectContentArea"),"--"),e.Q6J("ngModel",t.pageFilter.contentAreaName),e.xp6(2),e.Q6J("hidden",""===t.pageFilter.contentAreaName),e.xp6(2),e.Oqu(e.lcZ(35,59,"general.clearFilters")),e.xp6(2),e.Udp("flex-basis",t.columnWidth.courseName,"px"),e.xp6(1),e.MGl("placeholder","--",e.lcZ(38,61,"general.selectCourse"),"--"),e.Q6J("ngModel",t.pageFilter.courseName),e.xp6(2),e.Q6J("hidden",""===t.pageFilter.courseName),e.xp6(2),e.Oqu(e.lcZ(42,63,"general.clearFilters")),e.xp6(4),e.Q6J("ngForOf",t.masterFilter.mapNames),e.xp6(2),e.Q6J("ngForOf",t.masterFilter.contentAreaNames),e.xp6(2),e.Q6J("ngForOf",t.masterFilter.courseNames),e.xp6(3),e.Q6J("columnDefs",t.columnDefs)("rowData",t.rowData)("pagination",!1)("animateRows",!0)("gridOptions",t.gridOptions),e.xp6(1),e.Q6J("translate","messages.valuerowsfound")("translateParams",e.VKq(69,j,t.rowData.length)),e.xp6(2),e.Q6J("columnDefs",t.columnAddedMapDefs)("rowData",t.addedRowData)("pagination",!1)("animateRows",!0)("gridOptions",t.gridAddedOptions),e.xp6(1),e.Q6J("translate","messages.valuerowsfound")("translateParams",e.VKq(71,j,t.addedRowData.length))}}function it(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h4",52),e._uU(2),e.qZA(),e.TgZ(3,"ag-grid-angular",53),e.NdJ("sortChanged",function(i){return e.CHM(t),e.oxw().onSortSharedChanged(i)})("rowClicked",function(i){return e.CHM(t),e.oxw().onRowSharedClicked(i)})("gridReady",function(i){return e.CHM(t),e.oxw().onGridReadyShared(i)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu("maps.sharedMapList| translate"),e.xp6(1),e.Q6J("columnDefs",t.columnSharedDefs)("rowData",t.rowSharedData)("pagination",!1)("paginationAutoPageSize",!1)("animateRows",!0)("gridOptions",t.gridSharedOptions)}}function st(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.createMapsToShareAndCopyLink(i.sharedForm.value)}),e._UZ(1,"i",55),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"shareCourse.createandCopy")," "))}function ot(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"general.close")))}function rt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancel()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"general.cancel")))}l(8259);let lt=(()=>{class n{constructor(t,a,i,s,h,M,w,m,f,T,_,v,C){this._router=t,this._fb=a,this.activeModal=i,this.sharedMapService=s,this.mapService=h,this.lastDayService=M,this.notifierService=w,this.spinner=m,this.calendarService=f,this.helperService=T,this.roleService=_,this.location=v,this.translate=C,this.ngUnsubscribe=new S.x,this.isCheckedLink=!1,this.rowData=[],this.mapsMaster=[],this.addedRowData=[],this.rowSharedData=[],this.submitted=!1,this.isLink=!1,this.districtDays=[],this.disableLinks=!1,this.columnWidth={mapName:0,contentAreaName:0,courseName:0},this.pageFilter={mapName:"",contentAreaName:"",courseName:""},this.masterFilter={mapNames:[],contentAreaNames:[],courseNames:[]},this.headerNameMapName="",this.headerNameContentArea="",this.headerNameCourse="",this.headerNameShareName="",this.headerNameExpireDate="",this.headerNameActions="",this.createMasterFilter=y=>{if(!this.mapsMaster||!this.mapsMaster.length)return[];const F=this.mapsMaster.map(b=>b[y]).filter((b,k,Q)=>b&&Q.indexOf(b)===k);return F.sort(),F},this.addActionCellRenderer=y=>{let g='<div class="btn-group"><button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"  class="btn btn-success btn-xs" title="Add Map" data-action-type="addMap"><i data-action-type="addMap" class="fa fa-plus" aria-hidden="true"></i></button>';return g+="</div>",'<div class="btn-group"><button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"  class="btn btn-success btn-xs" title="Add Map" data-action-type="addMap"><i data-action-type="addMap" class="fa fa-plus" aria-hidden="true"></i></button></div>'},this.deleteActionCellRenderer=y=>{let g='<div class="btn-group"><button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"  class="btn btn-danger btn-xs"  title="Delete Map" data-action-type="deleteMap"><i data-action-type="deleteMap" class="fa fa-trash" aria-hidden="true"></i></button>';return g+="</div>",'<div class="btn-group"><button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"  class="btn btn-danger btn-xs"  title="Delete Map" data-action-type="deleteMap"><i data-action-type="deleteMap" class="fa fa-trash" aria-hidden="true"></i></button></div>'},this.actionCellRenderer=y=>{let g='<div class="btn-group"><button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"  class="btn btn-success btn-xs" data-toggle="tooltip" data-placement="bottom" title="Get Link" data-action-type="link"><i data-action-type="link" class="fa fa-link" aria-hidden="true"></i></button>'+(y.data.disableLinks?'<button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"\n       class="btn btn-primary btn-xs" data-toggle="tooltip" data-placement="bottom" title="Enable Link" data-action-type="enable">\n      <i data-action-type="enable" class="fa fa-unlock" aria-hidden="true"></i></button>':'\n      <button style="padding: 2px 5px 1px;font-size: 9px;line-height: 1.4;border-radius: 3px;"\n       class="btn btn-warning btn-xs" data-toggle="tooltip" data-placement="bottom" title="Disable Link" data-action-type="disable">\n      <i data-action-type="disable" class="fa fa-lock" aria-hidden="true"></i></button>');return g+="</div>",g},this.gridOptions={context:{componentParent:this},rowSelection:"single",rowHeight:25,headerHeight:25,pagination:!1,paginationPageSize:L.N.agGridPageSize,overlayNoRowsTemplate:"No Data found."},this.gridAddedOptions={context:{componentParent:this},rowSelection:"single",rowHeight:25,headerHeight:25,pagination:!1,paginationPageSize:L.N.agGridPageSize,overlayNoRowsTemplate:"No Data found."},this.gridSharedOptions={context:{componentParent:this},rowSelection:"single",rowHeight:25,headerHeight:25,pagination:!1,paginationPageSize:L.N.agGridPageSize,overlayNoRowsTemplate:"No Data found."}}ngOnInit(){this.translateHeaderNameCourse(),this.createColumnDefs(),this.createAddedMapColumnDefs(),this.createSharedColumnDefs(),this.getMaps(),this.getListOfSharedMaps(),this.getDistrictDays(),this.createForm(),this.showClose="/shared-maps/maps"!==this._router.url}translateHeaderNameCourse(){this.translate.onLangChange.subscribe(t=>{this.headerNameMapName=t.translations.general.mapName,this.headerNameContentArea=t.translations.general.contentArea,this.headerNameCourse=t.translations.general.course,this.headerNameShareName=t.translations.calendar.shareName,this.headerNameActions=t.translations.general.actions,this.createColumnDefs(),this.createAddedMapColumnDefs(),this.createSharedColumnDefs(),this.noDataFoundTranslated=t.translations.general.nodatafound,(0,P.XO)("#grid",this.noDataFoundTranslated),(0,P.XO)("#grid2",this.noDataFoundTranslated),(0,P.XO)("#grid3",this.noDataFoundTranslated)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onResize(t){this.gridResizeHandler(),this.gridAddedResizeHandler()}cancel(){this.location.back()}createForm(){this.sharedForm=this._fb.group({title:new r.NI("",r.kI.required),expirationDate:new r.NI("",r.kI.required),lastDay:new r.NI("")})}get fc(){return this.sharedForm.controls}createColumnDefs(){this.translate.get(["general.mapName","general.contentArea","general.course"]).subscribe(t=>{this.headerNameMapName=t["general.mapName"],this.headerNameContentArea=t["general.contentArea"],this.headerNameCourse=t["general.course"];const a={"font-size":"10px"};this.columnDefs=[{field:"mapName",headerName:this.headerNameMapName,minWidth:350,cellStyle:a},{field:"contentAreaName",headerName:this.headerNameContentArea,minWidth:250,cellStyle:a},{field:"courseName",headerName:this.headerNameCourse,minWidth:300,cellStyle:a},{cellRenderer:this.addActionCellRenderer,headerName:"",suppressSorting:!0,width:40,suppressSizeToFit:!0,cellStyle:a}]})}createAddedMapColumnDefs(){this.translate.get("general.mapName").subscribe(t=>{this.headerNameMapName=t;const a={"font-size":"10px","text-align":"left"};this.columnAddedMapDefs=[{field:"mapName",headerName:this.headerNameMapName,cellStyle:a},{cellRenderer:this.deleteActionCellRenderer,headerName:"",suppressSorting:!0,width:40,suppressSizeToFit:!0,cellStyle:a}]})}createSharedColumnDefs(){this.translate.get(["calendar.shareName","general.actions"]).subscribe(t=>{this.headerNameShareName=t["calendar.shareName"],this.headerNameActions=t["general.actions"];const a={"font-size":"10px"};this.columnSharedDefs=[{field:"shareTitle",headerName:this.headerNameShareName,suppressResize:!1,cellStyle:a},{field:"expireDateStr",headerName:"Expires Date",suppressSizeToFit:!0,cellStyle:a},{cellRenderer:this.actionCellRenderer,headerName:this.headerNameActions,suppressSorting:!0,hide:!1,width:80,suppressSizeToFit:!0,cellStyle:a}]})}getMaps(){var t=this;return(0,Ge.Z)(function*(){t.mapRequest=new G.v,t.roleService.isSysAdmin()?t.mapType=p.T.sysAdmin:t.roleService.isDistrictAdmin()?t.mapType=p.T.district:t.roleService.isSchoolAdmin()?t.mapType=p.T.school:t.roleService.isTeacher()&&(t.mapType=p.T.teacher),t.mapsMaster=[],t.rowData=[],t.spinner.show(),t.mapService.getHyDratedMaps(t.mapType,t.mapRequest).pipe((0,d.R)(t.ngUnsubscribe)).subscribe(a=>{t.spinner.hide(),t.mapsMaster=c.cloneDeep(a.rows),t.rowData=c.cloneDeep(a.rows),t.masterFilter={mapNames:t.createMasterFilter("mapName"),contentAreaNames:t.createMasterFilter("contentAreaName"),courseNames:t.createMasterFilter("courseName")}})})()}getListOfSharedMaps(){this.sharedMapService.getSharedMapList().subscribe(t=>{this.rowSharedData=c.cloneDeep(t)})}closeModal(){this.activeModal.dismiss()}onColumnResized(t){if("columnResized"!==t.type||!t.columns||!t.columns.length)return;const a=t.columns[0];switch(a.colId){case"mapName":this.columnWidth.mapName=a.actualWidth;break;case"contentAreaName":this.columnWidth.contentAreaName=a.actualWidth;break;case"courseName":this.columnWidth.courseName=a.actualWidth}}onGridReady(t){this.agGridApi=t.api,this.agGridApi.sizeColumnsToFit(),this.agGridApi.setServerSideDatasource(this.rowData),this.gridResizeHandler(1e3)}onGridResize(t){this.agGridApi=t.api,this.gridResizeHandler(1e3)}gridResizeHandler(t=0){const a=window.setInterval(()=>{this.agGridApi&&(this.agGridApi.sizeColumnsToFit(),window.clearInterval(a))},t)}onSortChanged(t){t.api.sizeColumnsToFit()}onRowClicked(t){if(void 0!==t.event.target){const a=t.event.target.getAttribute("data-action-type");a&&"addMap"===a&&(this.addedRowData=[...this.addedRowData,t.data])}}onAddedGridReady(t){this.agAddedGridApi=t.api,this.agAddedGridApi.sizeColumnsToFit(),this.agAddedGridApi.setServerSideDatasource(this.addedRowData),this.gridAddedResizeHandler(1e3)}onAddedGridResize(t){this.agAddedGridApi=t.api,this.gridAddedResizeHandler(1e3)}gridAddedResizeHandler(t=0){const a=window.setInterval(()=>{this.agGridApi&&(this.agAddedGridApi.sizeColumnsToFit(),window.clearInterval(a))},t)}onAddedSortChanged(t){t.api.sizeColumnsToFit()}onAddedRowClicked(t){if(void 0!==t.event.target){const a=t.event.target.getAttribute("data-action-type");if(a&&"deleteMap"===a){let i=c.cloneDeep(this.addedRowData);i=i.filter(s=>s.mapGuid!==t.data.mapGuid),this.addedRowData=c.cloneDeep(i)}}}onGridReadyShared(t){this.agGridApi=t.api,this.agGridApi.sizeColumnsToFit(),this.agGridApi.setServerSideDatasource(this.rowData)}onSortSharedChanged(t){t.api.sizeColumnsToFit()}onRowSharedClicked(t){if(this.isLink=!1,void 0!==t.event.target){const a=t.event.target.getAttribute("data-action-type");if(a)switch(this.selectedRowData=t.data,a){case"link":this.selectedRowData.disableLinks?(this.notifierService.showWarningNotificationTranslated("general.thislinkhasbeendisabled"),this.isLink=!1):(this.isLink=!0,this.readOnlyLink=this.calendarService.getReadOnlySharedMapLink(this.selectedRowData.sharedMapId));break;case"disable":this.toogleDisableLink(t.data.sharedMapId,!0);break;case"enable":this.toogleDisableLink(t.data.sharedMapId,!1)}this.helperService.enableTooltips(),this.helperService.enableTooltipsV2()}}toogleDisableLink(t,a){this.submitted=!0,this.spinner.show(),this.sharedMapService.toogleDisableShareMapLink(t).subscribe(i=>{i?(this.spinner.hide(),this.notifierService.showSuccessNotificationTranslated(a?"general.thislinkhasbeendisabled":"general.thislinkhasbeenenabled"),this.getListOfSharedMaps(),this.submitted=!1,this.addedRowData=[],this.sharedForm.reset()):(this.spinner.hide(),this.notifierService.showErrorNotificationTranslated(a?"general.disableLink":"general.enableLink")),this.spinner.hide()},()=>{this.spinner.hide()})}createMapsToShareAndCopyLink(t){if(this.submitted=!0,!this.sharedForm.invalid){if(0===this.addedRowData.length)return void this.notifierService.showErrorNotificationTranslated("maps.pleaseaddatleastonemap");{this.spinner.show();const a={title:t.title,expireDate:t.expirationDate,maps:this.addedRowData.map(i=>i.mapGuid),disableLinks:!1};this.sharedMapService.saveSharedmap(a).subscribe(i=>{this.spinner.hide(),"00000000-0000-0000-0000-000000000000"!==i?(this.readOnlyLink=this.calendarService.getReadOnlySharedMapLink(i),this.helperService.copyToClipboard(this.readOnlyLink),this.getListOfSharedMaps(),this.submitted=!1,this.addedRowData=[],this.sharedForm.reset()):this.notifierService.showErrorNotificationTranslated("calendar.unabletocreatesharemaplin"),this.spinner.hide()})}}}getDistrictDays(){this.lastDayService.getDistrictDays().pipe((0,d.R)(this.ngUnsubscribe)).subscribe(t=>{t&&t.length&&(this.districtDays=c.cloneDeep(t))})}getLastDayOfSchool(t){if(t.target.checked){const s=c.maxBy(this.districtDays,"calDate").calDate;this.endDate=O(s).format("YYYY-MM-DD")}else this.endDate=""}onShareMapRadioChange(t){this.isCheckedLink="existingLinks"===t.target.value,this.getListOfSharedMaps()}filterOnChange(t,a){this.applyFilters()}filterOnKeyUp(t,a){this.applyFilters()}clearSelectedFilter(t,a){switch(a){case"mapName":this.pageFilter.mapName="";break;case"contentAreaName":this.pageFilter.contentAreaName="";break;case"courseName":this.pageFilter.courseName=""}this.applyFilters()}applyFilters(){let t=c.cloneDeep(this.mapsMaster);""!==this.pageFilter.mapName&&(t=t.filter(a=>a.mapName&&a.mapName.toLowerCase().includes(this.pageFilter.mapName.toLowerCase()))),""!==this.pageFilter.contentAreaName&&(t=t.filter(a=>a.contentAreaName&&a.contentAreaName.toLowerCase().includes(this.pageFilter.contentAreaName.toLowerCase()))),""!==this.pageFilter.courseName&&(t=t.filter(a=>a.courseName&&a.courseName.toLowerCase().includes(this.pageFilter.courseName.toLowerCase()))),this.rowData=c.cloneDeep(t)}copyMaplinkToClipboard(t){const a=document.createRange();a.selectNode(document.getElementById("readOnlyLinkMap")),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),this.notifierService.showSuccessNotificationTranslated("general.linkcopiedToClipboard")}toogleDisableLinks(){this.disableLinks=!this.disableLinks}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(r.qu),e.Y36(x.Kz),e.Y36(He.r),e.Y36(I.i),e.Y36(q.S),e.Y36(Z.l),e.Y36(D.V),e.Y36(ze.o),e.Y36(H.W),e.Y36(Ve.N),e.Y36(A.Ye),e.Y36(N.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-share-maps"]],hostBindings:function(t,a){1&t&&e.NdJ("resize",function(s){return a.onResize(s)},!1,e.Jf7)},inputs:{mapType:"mapType",mapRequest:"mapRequest"},decls:30,vars:16,consts:[[1,"modal-header"],[1,"container","row"],[1,"col","modal-title"],[1,"col"],["type","radio","id","createLink","name","radioLink","value","createLink","checked","",3,"change"],["for","createLink"],["type","radio","id","existingLinks","name","radioLink","value","existingLinks",3,"change"],["for","existingLinks"],["type","button","class","close","data-dismiss","modal","aria-label","Close",3,"click",4,"ngIf"],[1,"container-fluid","share-maps-container"],["class","col-12 pt-2",4,"ngIf"],[4,"ngIf"],[1,"d-flex","pt-3","pb-3","justify-content-end"],[1,"text-right"],["type","button","id","share-map","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-default","data-dismiss","modal",3,"click",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"col-12","pt-2"],[1,"row"],["type","text","id","readOnlyLinkMap","disabled","",1,"form-control","col-8",3,"ngModel","ngModelChange"],[1,"col-1"],["type","button",1,"btn","btn-sm","btn-success","col-2",3,"click"],["aria-hidden","true",1,"fa","fa-clipboard"],[3,"formGroup"],[1,"d-flex","create-link-row"],[1,"first-col"],[1,"second-col"],["type","text","formControlName","title",1,"form-control",3,"placeholder","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"third-col"],[1,"fourth-col"],["type","date","formControlName","expirationDate",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["type","checkbox","id","lastDay","name","lastDay",3,"change"],["for","lastDay"],[1,"d-flex","share-maps-search-container"],["type","text","list","map-names",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],["aria-hidden","true","title","Clear Filter",1,"p-1","fa","fa-times","text-danger",3,"hidden","click"],[1,"sr-only"],["type","text","list","content-area-names",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],["type","text","list","course-names",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],[1,"datalist-container"],["id","map-names"],[3,"value",4,"ngFor","ngForOf"],["id","content-area-names"],["id","course-names"],[1,"d-flex"],["id","grid",1,"ag-theme-material",2,"height","calc(100vh - 310px)","width","950px","overflow","hidden",3,"columnDefs","rowData","pagination","animateRows","gridOptions","columnResized","gridReady","gridResize","rowClicked","sortChanged"],[1,"text-muted","text-right","d-block","font-italic",3,"translate","translateParams"],["id","grid2",1,"ag-theme-material",2,"height","calc(100vh - 310px)","width","calc(100vw - 980px)","overflow","hidden",3,"columnDefs","rowData","pagination","animateRows","gridOptions","gridReady","gridResize","rowClicked","sortChanged"],[1,"invalid-feedback"],[3,"value"],[1,"modal-title"],["id","grid3",1,"ag-theme-material","plans-grid",2,"height","400px","width","100%","overflow","hidden",3,"columnDefs","rowData","pagination","paginationAutoPageSize","animateRows","gridOptions","sortChanged","rowClicked","gridReady"],["type","button","id","share-map",1,"btn","btn-sm","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-save"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-default",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h6",2)(3,"b"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3)(7,"input",4),e.NdJ("change",function(s){return a.onShareMapRadioChange(s)}),e.qZA(),e.TgZ(8,"label",5)(9,"b"),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",3)(13,"input",6),e.NdJ("change",function(s){return a.onShareMapRadioChange(s)}),e.qZA(),e.TgZ(14,"label",7)(15,"b"),e._uU(16),e.ALo(17,"translate"),e.qZA()()(),e.TgZ(18,"div",3),e.YNc(19,je,3,0,"button",8),e.qZA()()(),e.TgZ(20,"div",9),e.YNc(21,We,8,4,"div",10),e.TgZ(22,"div"),e.YNc(23,nt,57,73,"div",11),e.YNc(24,it,4,7,"div",11),e.TgZ(25,"div",12)(26,"div",13),e.YNc(27,st,4,3,"button",14),e.YNc(28,ot,3,3,"button",15),e.YNc(29,rt,3,3,"button",15),e.qZA()()()()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,10,"shareCourse.shareMaps")),e.xp6(6),e.Oqu(e.lcZ(11,12,"calendar.createLink")),e.xp6(6),e.Oqu(e.lcZ(17,14,"calendar.showExistingLinks")),e.xp6(3),e.Q6J("ngIf",a.showClose),e.xp6(2),e.Q6J("ngIf",a.isLink),e.xp6(2),e.Q6J("ngIf",!a.isCheckedLink),e.xp6(1),e.Q6J("ngIf",a.isCheckedLink),e.xp6(3),e.Q6J("ngIf",!a.isCheckedLink),e.xp6(1),e.Q6J("ngIf",!a.isCheckedLink&&a.showClose),e.xp6(1),e.Q6J("ngIf",!a.isCheckedLink&&!a.showClose))},directives:[A.O5,r.Fj,r.JJ,r.On,r._Y,r.JL,r.sg,r.u,A.mk,A.sg,r.YN,r.Kr,z.N8,N.Pi],pipes:[N.X$],styles:[".share-maps-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], label[_ngcontent-%COMP%], div[_ngcontent-%COMP%]{font-size:12px!important}.share-maps-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:25px!important}.ag-grid-container[_ngcontent-%COMP%]{height:100%;padding:0;margin:0}.create-link-row[_ngcontent-%COMP%]{margin-top:20px}.create-link-row[_ngcontent-%COMP%]   .first-col[_ngcontent-%COMP%]{margin-top:4px;width:60px}.create-link-row[_ngcontent-%COMP%]   .second-col[_ngcontent-%COMP%]{width:500px}.create-link-row[_ngcontent-%COMP%]   .third-col[_ngcontent-%COMP%]{margin-left:30px;margin-top:4px;width:140px}.create-link-row[_ngcontent-%COMP%]   .fourth-col[_ngcontent-%COMP%]{width:200px}.share-maps-search-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0}.share-maps-search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;width:90%}.share-maps-search-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]     .share-maps-search-container .dropdown-menu .dropdown-item{font-size:12px;padding-left:5px}.datalist-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-size:12px;padding-left:5px}[_nghost-%COMP%]     .mdModal>-shadowcsshost   .modal-dialog{max-width:100%!important;min-width:100%!important;width:100%!important}@media (min-width: 768px){[_nghost-%COMP%]     .modal-xl{width:90%!important;max-width:100%!important}}@media (min-width: 1200px){[_nghost-%COMP%]     .modal-xl{max-width:100%!important}}@media (min-width: 992px){[_nghost-%COMP%]     .modal-xl{max-width:95%!important}[_nghost-%COMP%]     .modal-lg{max-width:95%!important}}[_nghost-%COMP%]     .modal-lg{max-width:95%!important}[_nghost-%COMP%]     .lgModal>.modal-lg{max-width:100%!important}"]}),n})(),ct=(()=>{class n{constructor(t,a,i,s){this.activeModal=t,this.spinner=a,this.mapService=i,this.notifier=s,this.ngUnsubscribe=new S.x}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}closeDeleteConfirmModal(){this.activeModal.dismiss()}deleteSelectedMaps(t){this.spinner.show(),this.mapService.deleteAndRestoreSelectedMaps(this.modalData.mapGuids,!0,t).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(i=>{i&&i.length&&i.every(Boolean)?(this.notifier.showSuccessNotificationTranslated("maps.selectedmapsdeletedsucces"),this.modalData.getMaps()):this.notifier.showErrorNotificationTranslated("maps.selectedmapsdeletionfaile"),this.spinner.hide(),this.activeModal.close()},i=>{this.spinner.hide(),this.notifier.showErrorNotificationTranslated("maps.selectedmapsdeletionfaile"),this.activeModal.close()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Kz),e.Y36(D.V),e.Y36(I.i),e.Y36(Z.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-selected-confirmation-modal"]],inputs:{modalData:"modalData"},decls:22,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["type","button","data-dismiss","modal",1,"btn","btn-default",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return a.closeDeleteConfirmModal()}),e.TgZ(5,"span",3),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",5)(11,"button",6),e.NdJ("click",function(){return a.deleteSelectedMaps(!1)}),e._UZ(12,"i",7),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",6),e.NdJ("click",function(){return a.deleteSelectedMaps(!0)}),e._UZ(16,"i",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"button",8),e.NdJ("click",function(){return a.closeDeleteConfirmModal()}),e._uU(20),e.ALo(21,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,5,"maps.deleteMap")),e.xp6(6),e.hij(" ",e.lcZ(9,7,"maps.areyousuretodeletethesel"),"\n"),e.xp6(5),e.hij(" ",e.lcZ(14,9,"maps.deleteMaps")," "),e.xp6(4),e.hij(" ",e.lcZ(18,11,"maps.deleteMapandallitsassocia")," "),e.xp6(3),e.Oqu(e.lcZ(21,13,"general.cancel")))},pipes:[N.X$],styles:[".md-modal .modal-dialog{max-width:600px;width:600px}"]}),n})();var dt=l(9629),pt=l(7129),ht=l(3071);function mt(n,o){if(1&n&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("ngValue",t.text),e.xp6(1),e.hij(" ",t.text," ")}}function ut(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"select",29),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedSchoolName=i})("change",function(){return e.CHM(t),e.oxw().onSchoolChange()}),e.TgZ(1,"option",30),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,mt,2,2,"option",31),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.selectedSchoolName),e.xp6(2),e.hij("--",e.lcZ(3,3,"general.selectSchool"),"--"),e.xp6(2),e.Q6J("ngForOf",t.schools)}}function gt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("change",function(){return e.CHM(t),e.oxw(2).toggleShowLicensedMaps()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("checked",t.pageFilter.showLicensedMaps)}}function ft(n,o){1&n&&(e.TgZ(0,"label",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"maps.showLicensedMaps")))}function _t(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,gt,1,1,"input",33),e.YNc(2,ft,3,3,"label",34),e.TgZ(3,"input",35),e.NdJ("change",function(){return e.CHM(t),e.oxw().toggleShowArchivedMaps()}),e.qZA(),e.TgZ(4,"label",36),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"input",37),e.NdJ("change",function(){return e.CHM(t),e.oxw().toggleShowDeletedMaps()}),e.qZA(),e.TgZ(8,"label",38),e._uU(9),e.ALo(10,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","sa"===t.mapType),e.xp6(1),e.Q6J("ngIf","sa"===t.mapType),e.xp6(1),e.Q6J("checked",t.pageFilter.showArchivedMaps),e.xp6(2),e.Oqu(e.lcZ(6,6,"maps.showArchivedMaps")),e.xp6(2),e.Q6J("checked",t.pageFilter.showDeletedMaps),e.xp6(2),e.Oqu(e.lcZ(10,8,"maps.showDeletedMaps"))}}function Ct(n,o){1&n&&e._UZ(0,"option",41),2&n&&e.Q6J("value",o.$implicit)}function Mt(n,o){1&n&&e._UZ(0,"option",41),2&n&&e.Q6J("value",o.$implicit)}function Tt(n,o){1&n&&e._UZ(0,"option",41),2&n&&e.Q6J("value",o.$implicit)}function vt(n,o){1&n&&e._UZ(0,"option",41),2&n&&e.Q6J("value",o.$implicit)}const bt=function(n){return{value:n}},At=(l(8259),[{path:"",component:B},{path:":type/add-available",component:K},{path:":type/create",component:le},{path:":type/edit/:id",component:ce},{path:":type/manage",component:(()=>{class n{constructor(t,a,i,s,h,M,w,m,f,T){this.router=t,this.modalService=a,this.spinner=i,this.helperService=s,this.mapService=h,this.notifierService=M,this.persistFiltersService=w,this.schoolService=m,this.userService=f,this.translate=T,this.pageTitle="",this.filterType="",this.craftMapsUrl="",this.selectedSchoolName="",this.ngUnsubscribe=new S.x,this.columnDefs=[],this.rowSelection="multiple",this.mapsMaster=[],this.mapsBySchool=[],this.rowData=[],this.schools=[],this.mapRequest=new G.v,this.masterFilter={mapNames:[],contentAreaNames:[],courseNames:[],mapTypes:[]},this.columnWidth={mapName:0,contentAreaName:0,courseName:0,mapType:0},this.retryCount=0,this.headerNameMapName="",this.headerNameUpdated="",this.headerNameTeacher="",this.headerNameSchool="",this.headerNameDistrict="",this.headerNameAdmin="",this.noMapsFoundTranslated="",this.getMaps=()=>{this.spinner.show(),this.mapRequest.showLicensed=this.pageFilter.showLicensedMaps,this.mapRequest.showArchived=this.pageFilter.showArchivedMaps,this.mapRequest.isdeleted=this.pageFilter.showDeletedMaps,this.mapService.getHyDratedMaps(this.mapTypeEnum,this.mapRequest).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(_=>{this.spinner.hide(),_&&_.rows&&_.rows.length?(this.rowData=c.cloneDeep(_.rows),this.mapsMaster=c.cloneDeep(_.rows),this.createMasterFilters(),this.applyFilters()):(this.rowData=[],this.mapsMaster=[],this.gridApi.showNoRowsOverlay(),this.notifierService.showErrorNotificationTranslated("maps.noMapsFound")),this.spinner.hide()},_=>{this.rowData=[],this.mapsMaster=[],this.gridApi.showNoRowsOverlay(),this.spinner.hide()})},this.setGridOptions=()=>{this.gridOptions={context:{componentParent:this},headerHeight:30,sortingOrder:["asc","desc"],icons:{sortNone:'<i class="fa fa-minus"/>',sortAscending:'<i class="fa fa-arrow-down"/>',sortDescending:'<i class="fa fa-arrow-up"/>'},overlayNoRowsTemplate:this.noMapsFoundTranslated,pagination:!1,paginationPageSize:L.N.agGridPageSize,rowClass:"ag-maps-row",rowHeight:22}},this.createColumnDefs=()=>{this.translate.get(["general.mapName","general.updated","maps.noMapsFound"]).subscribe(_=>{this.headerNameMapName=_["general.mapName"],this.headerNameUpdated=_["general.updated"],this.noMapsFoundTranslated=_["maps.noMapsFound"];const v={planType:this.mapType,cellType:"",contentAreas:[],maps:[],mapGuids:[]};let C={cellType:"contentAreaName"};const y=Object.assign(Object.assign({},v),C);C={cellType:"courseName"};const g=Object.assign(Object.assign({},v),C);C={cellType:"mapType"};const F=Object.assign(Object.assign({},v),C),b={"font-size":"10px","text-align":"left"};this.columnDefs=[{cellRendererFramework:Ye,cellRendererParams:{mapType:this.mapType},sortingOrder:["asc","desc"],headerName:this.headerNameMapName,field:"mapName",minWidth:250,cellStyle:b,headerCheckboxSelection:!0,checkboxSelection:!0},{headerComponentFramework:R,sortingOrder:["asc","desc"],headerComponentParams:y,field:"contentAreaName",minWidth:250,cellStyle:b},{headerComponentFramework:R,sortingOrder:["asc","desc"],headerComponentParams:g,field:"courseName",minWidth:250,cellStyle:b},{headerComponentFramework:R,headerComponentParams:F,sortingOrder:["asc","desc"],field:"mapType",minWidth:200,cellStyle:b},{headerName:this.headerNameUpdated,field:"lastModifiedDate",sortingOrder:["asc","desc"],sort:"desc",minWidth:90,maxWidth:100,comparator:(k,Q,Jt,Ot,Et)=>O(k,"YYYY-MM-DDTHH:mm:ss.SS",!0).diff(O(Q,"YYYY-MM-DDTHH:mm:ss.SS",!0)),cellRenderer:function(k){return O(k.data.lastModifiedDate,"YYYY-MM-DDTHH:mm:ss.SSSS",!0).format("MM/DD/YYYY")},valueGetter:k=>O(k.data.lastModifiedDate,"YYYY-MM-DDTHH:mm:ss.SSSS",!0),cellStyle:b},{cellRendererFramework:Pe,cellRendererParams:{mapType:this.mapType},field:"mapGuid",headerName:"",maxWidth:140,minWidth:140}]})},this.createMasterFilter=_=>{const v=c.cloneDeep(""===this.selectedSchoolName?this.mapsMaster:this.mapsBySchool);if(!v||!v.length)return[];const y=v.map(g=>g[_]).filter((g,F,b)=>g&&b.indexOf(g)===F);return y.sort(),y},this.deleteSelectedMaps=()=>{this.selectedMapIds&&this.selectedMapIds.length?this.pageFilter.showDeletedMaps?this.notifierService.confirm(this.translate.instant("maps.restoreMap"),this.translate.instant("maps.areyousuretorestorethese"),this.translate.instant("general.restore"),this.translate.instant("maps.restoreMap"),"md").then(v=>{v&&(this.spinner.show(),this.mapService.deleteAndRestoreSelectedMaps(this.selectedMapIds,!1,!1).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(C=>{C&&C.length&&C.every(Boolean)?(this.getMaps(),this.notifierService.showSuccessNotificationTranslated("maps.selectedmapsrestoredsucc")):this.notifierService.showErrorNotificationTranslated("maps.selectedmapsrestorefaile"),this.spinner.hide()},C=>{this.spinner.hide()}))}):this.modalService.open(ct,{windowClass:"md-modal"}).componentInstance.modalData={mapGuids:this.selectedMapIds,getMaps:this.getMaps}:this.notifierService.showErrorNotificationTranslated("maps.pleaseselectatleastonemap")}}ngOnInit(){this.translateHeaderName(),this.setViewForMapType(),this.helperService.setPageTitleTranslated(this.pageTitle),this.setGridOptions(),this.createColumnDefs(),this.pageFilter=this.persistFiltersService.getFilter(this.filterType),this.getMaps()}translateHeaderName(){this.translate.onLangChange.subscribe(t=>{this.headerNameMapName=t.translations.general.mapName,this.headerNameUpdated=t.translations.general.updated,this.headerNameTeacher=t.translations.maps.manageTeacherMaps,this.headerNameSchool=t.translations.maps.manageSchoolMaps,this.headerNameDistrict=t.translations.maps.manageDistrictMaps,this.headerNameAdmin=t.translations.maps.manageSysAdminMaps,this.noMapsFoundTranslated=t.translations.maps.noMapsFound,this.createColumnDefs(),this.setViewForMapType(),this.gridResizeHandler(100)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onResize(t){this.gridResizeHandler(500)}goToMapPlans(){this.router.navigate([this.craftMapsUrl])}toggleShowLicensedMaps(){this.pageFilter.showLicensedMaps=!this.pageFilter.showLicensedMaps,this.getMaps()}toggleShowArchivedMaps(){this.pageFilter.showArchivedMaps=!this.pageFilter.showArchivedMaps,this.getMaps()}toggleShowDeletedMaps(){this.pageFilter.showDeletedMaps=!this.pageFilter.showDeletedMaps,this.getMaps()}onColumnResized(t){if("columnResized"!==t.type||!t.columns||!t.columns.length)return;const a=t.columns[0];switch(a.colId){case"mapName":this.columnWidth.mapName=a.actualWidth;break;case"contentAreaName":this.columnWidth.contentAreaName=a.actualWidth;break;case"courseName":this.columnWidth.courseName=a.actualWidth;break;case"mapType":this.columnWidth.mapType=a.actualWidth}}onGridReady(t){this.gridApi=t.api,this.gridResizeHandler(500)}onGridResize(t){this.gridResizeHandler(500)}onSortChanged(t){this.gridResizeHandler(500)}setViewForMapType(){this.translate.get(["maps.manageTeacherMaps","maps.manageSchoolMaps","maps.manageDistrictMaps","maps.manageSysAdminMaps"]).subscribe(t=>{switch(this.headerNameTeacher=t["maps.manageTeacherMaps"],this.headerNameSchool=t["maps.manageSchoolMaps"],this.headerNameDistrict=t["maps.manageDistrictMaps"],this.headerNameAdmin=t["maps.manageSysAdminMaps"],this.mapType){case"teacher":this.mapTypeEnum=p.T.teacher,this.pageTitle=this.headerNameTeacher,this.filterType="manage-teacher-maps",this.craftMapsUrl="/teacher/create-maps",this.getSchoolsForDA();break;case"school":this.mapTypeEnum=p.T.school,this.pageTitle=this.headerNameSchool,this.filterType="manage-school-maps",this.craftMapsUrl="/school/create-maps";break;case"da":this.mapTypeEnum=p.T.district,this.pageTitle=this.headerNameDistrict,this.filterType="manage-da-maps",this.craftMapsUrl="/da/create-maps",this.getSchoolsForDA();break;case"sa":this.mapTypeEnum=p.T.sysAdmin,this.pageTitle=this.headerNameAdmin,this.filterType="manage-sa-maps",this.craftMapsUrl="/sa/create-maps"}})}gridResizeHandler(t=0){const a=window.setInterval(()=>{this.gridApi&&(this.gridApi.sizeColumnsToFit(),window.clearInterval(a))},t)}getFilterTextBoxWidth(t){return t-25}filterOnChange(){this.applyFilters()}filterOnKeyUp(){this.applyFilters()}onSchoolChange(){if(""!==this.selectedSchoolName){const t=this.schools.find(({text:a})=>a===this.selectedSchoolName);if(void 0!==t){const a=Number(t.value);this.spinner.show(),this.schoolService.getMapsBySchoolId(a).subscribe(i=>{this.spinner.hide(),i.rows&&i.rows.length?this.mapsBySchool=i.rows.map(s=>({contentAreaGuid:s.contentAreaGuid,contentAreaName:s.contentAreaName,courseGuid:s.courseGuid,courseName:s.courseName,districtName:s.districtName,lastModifiedDate:s.lastModifiedDate,mapGuid:s.mapGuid,mapName:s.mapName,mapType:s.mapType})):(this.mapsBySchool=[],this.notifierService.showErrorNotificationTranslated("maps.nomapsfoundforschoolbrSh"),this.selectedSchoolName=""),this.clearFilters(),this.createMasterFilters()},i=>{this.spinner.hide(),this.notifierService.showErrorNotificationTranslated("maps.erroroccuredwhilefetching"),this.mapsBySchool=[],this.clearFilters(),this.createMasterFilters()})}}else this.clearFilters(),this.createMasterFilters()}getLanguage(){return localStorage.getItem("siteLanguage")}shareMaps(){const a=this.modalService.open(lt,{windowClass:"lgModal",size:"lg"});a.componentInstance.mapType=this.mapTypeEnum,a.componentInstance.mapRequest=this.mapRequest}getSchoolsForDA(){this.userService.getUsersSchoolsFilterDDL("").subscribe(t=>{t&&t.length?this.schools=t:(this.schools=[],this.notifierService.showErrorNotificationTranslated("adminDistricts.noschoolsfound"))},t=>{this.schools=[],this.notifierService.showErrorNotificationTranslated("maps.erroroccuredwhilefetching")})}createMasterFilters(){this.masterFilter={mapNames:this.createMasterFilter("mapName"),contentAreaNames:this.createMasterFilter("contentAreaName"),courseNames:this.createMasterFilter("courseName"),mapTypes:this.createMasterFilter("mapType")}}clearFilters(){this.pageFilter={mapName:"",contentAreaName:"",courseName:"",mapType:""},this.clearPageState(),this.applyFilters()}clearSelectedFilter(t){this.pageFilter[t]="",this.applyFilters()}applyFilters(){let t=c.cloneDeep(""===this.selectedSchoolName?this.mapsMaster:this.mapsBySchool);""!==this.pageFilter.mapName&&(t=t.filter(a=>a.mapName&&a.mapName.toLowerCase().includes(this.pageFilter.mapName.toLowerCase()))),""!==this.pageFilter.contentAreaName&&(t=t.filter(a=>a.contentAreaName&&a.contentAreaName.toLowerCase().includes(this.pageFilter.contentAreaName.toLowerCase()))),""!==this.pageFilter.courseName&&(t=t.filter(a=>a.courseName&&a.courseName.toLowerCase().includes(this.pageFilter.courseName.toLowerCase()))),""!==this.pageFilter.mapType&&(t=t.filter(a=>a.mapType&&a.mapType.toLowerCase().includes(this.pageFilter.mapType.toLowerCase()))),this.rowData=c.cloneDeep(t),this.persistFiltersService.setFilter(this.filterType,this.pageFilter)}get selectedMapIds(){return null==this.gridApi||void 0===this.gridApi?[]:this.gridApi.getSelectedRows().map(i=>i.mapGuid)}clearPageState(){this.mapService.clearPageState(this.mapTypeEnum)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(x.FF),e.Y36(D.V),e.Y36(H.W),e.Y36(I.i),e.Y36(Z.l),e.Y36(dt.w),e.Y36(pt.E),e.Y36(ht.K),e.Y36(N.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manage-maps"]],hostBindings:function(t,a){1&t&&e.NdJ("resize",function(s){return a.onResize(s)},!1,e.Jf7)},inputs:{mapType:"mapType",userType:"userType"},decls:67,vars:72,consts:[[1,"mt-3"],[1,"row"],[1,"col","header"],[1,"col","text-right"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"d-flex","justify-content-between"],["id","school-select","class","form-control",3,"ngModel","ngModelChange","change",4,"ngIf"],[4,"ngIf"],[1,"d-flex","search-container"],["type","text","list","map-names",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],["aria-hidden","true","title","Clear Filter",1,"p-1","fa","fa-times","text-danger",3,"hidden","click"],[1,"sr-only"],["type","text","list","content-area-names",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],["type","text","list","course-names",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],["type","text","list","map-types",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup"],[1,"btn","btn-sm","btn-danger","delete-button",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"datalist-container"],["id","map-names"],[3,"value",4,"ngFor","ngForOf"],["id","content-area-names"],["id","course-names"],["id","map-types"],[1,"ag-grid-container"],["id","mapsGrid",1,"ag-selection-grid","ag-theme-material","maps-grid",3,"columnDefs","gridOptions","rowData","rowSelection","columnResized","gridReady","gridResize","sortChanged"],["agGrid",""],[1,"text-right"],[1,"text-muted","font-italic",3,"translate","translateParams"],["id","school-select",1,"form-control",3,"ngModel","ngModelChange","change"],["value","","selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","checkbox","id","showLicensed","name","showLicensed",3,"checked","change",4,"ngIf"],["class","form-check-label","for","showLicensed",4,"ngIf"],["type","checkbox","id","showArchived","name","showArchived",3,"checked","change"],["for","showArchived",1,"form-check-label"],["type","checkbox","id","includeDeletedMaps","name","includeDeletedMaps",1,"ml-2",3,"checked","change"],["for","includeDeletedMaps",1,"form-check-label"],["type","checkbox","id","showLicensed","name","showLicensed",3,"checked","change"],["for","showLicensed",1,"form-check-label"],[3,"value"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return a.goToMapPlans()}),e._UZ(7,"i",5),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){return a.shareMaps()}),e._UZ(11,"i",5),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",6)(15,"div"),e.YNc(16,ut,5,5,"select",7),e.qZA(),e.YNc(17,_t,11,10,"div",8),e.qZA(),e.TgZ(18,"div",6)(19,"div",9)(20,"div")(21,"input",10),e.NdJ("ngModelChange",function(s){return a.pageFilter.mapName=s})("change",function(){return a.filterOnChange()})("keyup",function(){return a.filterOnKeyUp()}),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"i",11),e.NdJ("click",function(){return a.clearSelectedFilter("mapName")}),e.TgZ(24,"span",12),e._uU(25),e.ALo(26,"translate"),e.qZA()()(),e.TgZ(27,"div")(28,"input",13),e.NdJ("ngModelChange",function(s){return a.pageFilter.contentAreaName=s})("change",function(){return a.filterOnChange()})("keyup",function(){return a.filterOnKeyUp()}),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"i",11),e.NdJ("click",function(){return a.clearSelectedFilter("contentAreaName")}),e.TgZ(31,"span",12),e._uU(32),e.ALo(33,"translate"),e.qZA()()(),e.TgZ(34,"div")(35,"input",14),e.NdJ("ngModelChange",function(s){return a.pageFilter.courseName=s})("change",function(){return a.filterOnChange()})("keyup",function(){return a.filterOnKeyUp()}),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"i",11),e.NdJ("click",function(){return a.clearSelectedFilter("courseName")}),e.TgZ(38,"span",12),e._uU(39),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"div")(42,"input",15),e.NdJ("ngModelChange",function(s){return a.pageFilter.mapType=s})("change",function(){return a.filterOnChange()})("keyup",function(){return a.filterOnKeyUp()}),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"i",11),e.NdJ("click",function(){return a.clearSelectedFilter("mapType")}),e.TgZ(45,"span",12),e._uU(46),e.ALo(47,"translate"),e.qZA()()()(),e.TgZ(48,"div")(49,"button",16),e.NdJ("click",function(){return a.deleteSelectedMaps()}),e._UZ(50,"i",17),e._uU(51),e.ALo(52,"translate"),e.qZA()()(),e.TgZ(53,"div",18)(54,"datalist",19),e.YNc(55,Ct,1,1,"option",20),e.qZA(),e.TgZ(56,"datalist",21),e.YNc(57,Mt,1,1,"option",20),e.qZA(),e.TgZ(58,"datalist",22),e.YNc(59,Tt,1,1,"option",20),e.qZA(),e.TgZ(60,"datalist",23),e.YNc(61,vt,1,1,"option",20),e.qZA()(),e.TgZ(62,"div",24)(63,"ag-grid-angular",25,26),e.NdJ("columnResized",function(s){return a.onColumnResized(s)})("gridReady",function(s){return a.onGridReady(s)})("gridResize",function(s){return a.onGridResize(s)})("sortChanged",function(s){return a.onSortChanged(s)}),e.qZA(),e.TgZ(65,"div",27),e._UZ(66,"small",28),e.qZA()()()),2&t&&(e.xp6(4),e.Oqu(a.pageTitle),e.xp6(4),e.hij("\xa0",e.lcZ(9,48,"menu.craftYourMap")," "),e.xp6(4),e.hij("\xa0",e.lcZ(13,50,"menu.shareMyMaps")," "),e.xp6(4),e.Q6J("ngIf","da"===a.mapType),e.xp6(1),e.Q6J("ngIf",""===a.selectedSchoolName),e.xp6(3),e.Udp("flex-basis",a.columnWidth.mapName,"px"),e.xp6(1),e.Udp("width",a.getFilterTextBoxWidth(a.columnWidth.mapName),"px"),e.Q6J("placeholder",e.lcZ(22,52,"general.selectMapName"))("ngModel",a.pageFilter.mapName),e.xp6(2),e.Q6J("hidden",""===a.pageFilter.mapName),e.xp6(2),e.Oqu(e.lcZ(26,54,"general.clearFilters")),e.xp6(2),e.Udp("flex-basis",a.columnWidth.contentAreaName,"px"),e.xp6(1),e.Udp("width",a.getFilterTextBoxWidth(a.columnWidth.contentAreaName),"px"),e.Q6J("placeholder",e.lcZ(29,56,"general.selectContentArea"))("ngModel",a.pageFilter.contentAreaName),e.xp6(2),e.Q6J("hidden",""===a.pageFilter.contentAreaName),e.xp6(2),e.Oqu(e.lcZ(33,58,"general.clearFilters")),e.xp6(2),e.Udp("flex-basis",a.columnWidth.courseName,"px"),e.xp6(1),e.Udp("width",a.getFilterTextBoxWidth(a.columnWidth.courseName),"px"),e.Q6J("placeholder",e.lcZ(36,60,"general.selectCourse"))("ngModel",a.pageFilter.courseName),e.xp6(2),e.Q6J("hidden",""===a.pageFilter.courseName),e.xp6(2),e.Oqu(e.lcZ(40,62,"general.clearFilters")),e.xp6(2),e.Udp("flex-basis",a.columnWidth.mapType,"px"),e.xp6(1),e.Udp("width",a.getFilterTextBoxWidth(a.columnWidth.mapType),"px"),e.Q6J("placeholder",e.lcZ(43,64,"general.selectMapType"))("ngModel",a.pageFilter.mapType),e.xp6(2),e.Q6J("hidden",""===a.pageFilter.mapType),e.xp6(2),e.Oqu(e.lcZ(47,66,"general.clearFilters")),e.xp6(5),e.hij(" ",e.lcZ(52,68,a.pageFilter.showDeletedMaps?"general.restoreSelected":"general.deleteSelected")," "),e.xp6(4),e.Q6J("ngForOf",a.masterFilter.mapNames),e.xp6(2),e.Q6J("ngForOf",a.masterFilter.contentAreaNames),e.xp6(2),e.Q6J("ngForOf",a.masterFilter.courseNames),e.xp6(2),e.Q6J("ngForOf",a.masterFilter.mapTypes),e.xp6(2),e.Q6J("columnDefs",a.columnDefs)("gridOptions",a.gridOptions)("rowData",a.rowData)("rowSelection",a.rowSelection),e.xp6(3),e.Q6J("translate","messages.valuemapsfound")("translateParams",e.VKq(70,bt,a.rowData.length)))},directives:[A.O5,r.EJ,r.JJ,r.On,r.YN,r.Kr,A.sg,r.Fj,z.N8,N.Pi],pipes:[N.X$],styles:[".header-row[_ngcontent-%COMP%]{margin-top:10px}.top-content[_ngcontent-%COMP%]{margin-bottom:1px;margin-right:5px}.top-content[_ngcontent-%COMP%]   .filter-button[_ngcontent-%COMP%]{padding-left:0}span.ag-header-cell-text[_ngcontent-%COMP%], .ag-theme-material[_ngcontent-%COMP%]   .ag-cell[_ngcontent-%COMP%]{line-height:39px!important}.btn-xs[_ngcontent-%COMP%]{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.ag-grid-container[_ngcontent-%COMP%]{height:100%;padding:0;margin:0}.ag-grid-container[_ngcontent-%COMP%]   .maps-grid[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow:auto;width:100%}  .ag-header-row .ag-header-icon.ag-sort-ascending-icon,   .ag-header-row .ag-header-icon.ag-sort-descending-icon{margin-top:-15px}  .ag-maps-row:hover{background-color:#0097d04d}  .ag-maps-row{font-size:10px}.search-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0}#school-select[_ngcontent-%COMP%]{padding:0 5px;margin-bottom:5px}#school-select[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;font-size:12px;height:25px}.search-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{height:23px;margin-bottom:2px;padding:.1rem .25rem}"]}),n})()},{path:":type/share",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-share-my-maps"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"share-my-maps works!"),e.qZA())},styles:[""]}),n})()},{path:":type/view/:id",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-view-map"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"view-map works!"),e.qZA())},styles:[""]}),n})()},{path:":type/view-table/:id",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cc-view-table"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"view-table works!"),e.qZA())},styles:[""]}),n})()}]);let Nt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(At)],u.Bz]}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[U.m,Nt]]}),n})()}}]);