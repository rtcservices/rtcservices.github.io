"use strict";(self.webpackChunkcc_app=self.webpackChunkcc_app||[]).push([[162],{162:(D,v,r)=>{r.d(v,{L:()=>H});var x=r(7579),g=r(2722),C=r(7489);class u{constructor(s=0,n=0,t="",o=""){this.LessonID=s,this.StandardID=n,this.LessonName=t,this.LessonContent=o}}r(7086);var e=r(5e3),b=r(520),w=r(946);let T=(()=>{class a{constructor(n,t){this._http=n,this._config=t}getContentAreas(){const n=this._config.getNWEAContentAreasURL();return this._http.get(n)}getCoursesByContentAreaId(n){const t=this._config.getNWEACoursesByContentAreaId(n);return this._http.get(t)}getRitRangesByStrandId(n){const t=this._config.getRitRangesByStandardId(n);return this._http.get(t)}getLessonsByRitId(n){const t=this._config.getNWEAResourcesByStandardId(n);return this._http.get(t)}getLessonsByLessonId(n){const t=this._config.getLessonsByLessonId(n);return this._http.get(t)}updateNweaLesson(n){const t=this._config.updateNweaLessonURL();return this._http.post(t,n)}}return a.\u0275fac=function(n){return new(n||a)(e.LFG(b.eN),e.LFG(w.E))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var R=r(555),S=r(3974),A=r(8138),Z=r(6888),f=r(7232),h=r(3075),m=r(9808),p=r(6912),N=r(4637),M=r(5436);function O(a,s){if(1&a&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",n.value),e.xp6(1),e.hij(" ",n.text," ")}}function y(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"td",48),e.NdJ("click",function(o){const i=e.CHM(n),d=i.$implicit,_=i.index;return e.oxw(7).fetchLessons(o,d.StandardId,_)}),e._uU(1),e.qZA()}if(2&a){const n=s.$implicit;e.xp6(1),e.hij(" ",n.StandardText," ")}}function I(a,s){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,y,2,1,"td",47),e.qZA()),2&a){const n=e.oxw(6);e.xp6(1),e.Q6J("ngForOf",n.ritRanges)}}function L(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",49),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"nwea.noRITRangesfound")," "))}function P(a,s){if(1&a){const n=e.EpF();e.ynx(0),e.TgZ(1,"i",55),e.NdJ("click",function(o){return e.CHM(n),e.oxw(7).toggleRitValue(o,!1)}),e.qZA(),e.BQk()}}function J(a,s){if(1&a){const n=e.EpF();e.ynx(0),e.TgZ(1,"i",56),e.NdJ("click",function(o){return e.CHM(n),e.oxw(7).toggleRitValue(o,!0)}),e.qZA(),e.BQk()}}function U(a,s){if(1&a&&(e.TgZ(0,"div",50)(1,"div",51),e.YNc(2,P,2,0,"ng-container",43),e.qZA(),e.TgZ(3,"div",52)(4,"h4")(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"h4"),e._UZ(8,"strong"),e.qZA(),e.TgZ(9,"h5",53),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",54),e.YNc(13,J,2,0,"ng-container",43),e.qZA()()),2&a){const n=e.oxw(6);e.xp6(2),e.Q6J("ngIf",!n.currentRitRange.isFirst),e.xp6(4),e.Oqu(n.currentRitRange.text),e.xp6(4),e.Oqu(e.lcZ(11,4,"nwea.developtheseskillsandconc")),e.xp6(3),e.Q6J("ngIf",!n.currentRitRange.isLast)}}function k(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"i",67),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit;return e.oxw(7).openEditNweaLessonContentModel(o)}),e.qZA()}}function F(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",59)(1,"div",60),e._UZ(2,"a",61),e.YNc(3,k,1,0,"i",62),e.qZA(),e.TgZ(4,"div",63)(5,"div",64),e._UZ(6,"span",65),e.ALo(7,"safe"),e.TgZ(8,"a",66),e.NdJ("click",function(){return e.CHM(n),e.oxw(7).doAlert()}),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()}if(2&a){const n=s.$implicit,t=s.index,o=e.oxw(3).index,i=e.oxw(2).index,d=e.oxw(2);e.xp6(1),e.cQ8("id","heading_",i,"_",o,"_",t,""),e.xp6(1),e.bQe("data-target","#collapse_",i,"_",o,"_",t,"")("aria-controls","collapse_",i,"_",o,"_",t,""),e.Q6J("innerHtml",n.LessonName,e.oJD),e.xp6(1),e.Q6J("ngIf",d.isSysAdmin),e.xp6(1),e.cQ8("id","collapse_",i,"_",o,"_",t,""),e.bQe("aria-labelledby","heading_",i,"_",o,"_",t,""),e.zWS("data-parent","#accordion_",i,"_",o,""),e.xp6(2),e.Q6J("innerHtml",e.xi3(7,21,n.LessonContent,"html"),e.oJD),e.xp6(3),e.Oqu(e.lcZ(10,24,"nwea.additionalSupportingResou"))}}function Q(a,s){if(1&a&&(e.TgZ(0,"div",57),e.YNc(1,F,11,26,"div",58),e.qZA()),2&a){const n=e.oxw(2).index,t=e.oxw(2).index,o=e.oxw(2);e.hYB("id","accordion_",t,"_",n,""),e.xp6(1),e.Q6J("ngForOf",o.lessons)}}function Y(a,s){if(1&a&&(e.TgZ(0,"div",68),e._uU(1),e.qZA()),2&a){const n=e.oxw(6);e.xp6(1),e.hij(" ",n.standardsMsg," ")}}function q(a,s){if(1&a&&(e.TgZ(0,"div",41)(1,"table",42)(2,"tbody"),e.YNc(3,I,2,1,"tr",43),e.YNc(4,L,4,3,"tr",43),e.qZA()(),e.YNc(5,U,14,6,"div",44),e.YNc(6,Q,2,3,"div",45),e.YNc(7,Y,2,1,"div",46),e.qZA()),2&a){const n=e.oxw(5);e.xp6(3),e.Q6J("ngIf",n._hasRitRanges()),e.xp6(1),e.Q6J("ngIf",!n._hasRitRanges()),e.xp6(1),e.Q6J("ngIf",n._hasRitRange()),e.xp6(1),e.Q6J("ngIf",n._hasLessons()),e.xp6(1),e.Q6J("ngIf",!n._hasLessons()&&null!=n.currentRitRange)}}function E(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"ngb-panel",39),e.NdJ("click",function(o){const d=e.CHM(n).$implicit;return e.oxw(4).fetchRITRanges(o,d.StrandId)}),e.YNc(1,q,8,5,"ng-template",40),e.qZA()}2&a&&e.s9C("title",s.$implicit.StrandName)}function B(a,s){if(1&a&&(e.TgZ(0,"ngb-accordion",36,37),e.YNc(2,E,2,1,"ngb-panel",38),e.qZA()),2&a){const n=e.oxw(),o=n.$implicit;e.s9C("activeIds",n.index),e.xp6(2),e.Q6J("ngForOf",o.Strands)}}function $(a,s){if(1&a&&(e.TgZ(0,"div",33)(1,"div",34),e._uU(2),e.qZA(),e.YNc(3,B,3,2,"ngb-accordion",35),e.qZA()),2&a){const n=s.$implicit,t=e.oxw(2);e.xp6(2),e.hij(" ",n.CourseName," "),e.xp6(1),e.Q6J("ngIf",t._hasStrands(n))}}function j(a,s){if(1&a&&(e.TgZ(0,"div",29)(1,"div",30)(2,"h3"),e._uU(3),e.qZA()(),e.TgZ(4,"div",31),e.YNc(5,$,4,2,"div",32),e.qZA()()),2&a){const n=e.oxw();e.xp6(3),e.Oqu(n.selectedContentArea.text),e.xp6(2),e.Q6J("ngForOf",n.courses)}}const c=r(8259);let H=(()=>{class a{constructor(n,t,o,i,d,_){this.nweaService=n,this.froalaConfig=t,this.helperService=o,this.notifierService=i,this.roleService=d,this.translate=_,this.displayType="component",this.ngUnsubscribe=new x.x,this.selectedContentArea={text:"",value:"0"},this.lesson=new u,this.standardsMsg="",this.isSaving=!1,this.isSysAdmin=!1,this.selectContentAreaTranslated="",this.selectanRITRangeTranslated="",this.additionalResourcesTranslated="",this.additionalResourcesWithEmailTranslated="",this.rangeNotApplicableTranslated="",this.getTranslations=()=>{this.translate.onLangChange.subscribe(l=>{this.selectContentAreaTranslated=l.translations.general.selectContentArea,this.selectanRITRangeTranslated=l.translations.nwea.selectanRITRange,this.additionalResourcesTranslated=l.translations.messages.additionalresourcesavaila,this.additionalResourcesWithEmailTranslated=l.translations.messages.additionalresourcesarenot,this.rangeNotApplicableTranslated=l.translations.nwea.rangenotapplicable,this.selectedContentArea.text=this.selectContentAreaTranslated,this.standardsMsg=this.selectanRITRangeTranslated})}}ngOnInit(){"component"==this.displayType&&this.helperService.setPageTitleTranslated("menu.nwea"),this.isSysAdmin=this.roleService.isSysAdmin(),this.getTranslations(),this._fetchContentAreas(),this.froalaStandardModal=C.cloneDeep(this.froalaConfig.editorSettingsActivity),this.initiateAccordionShownElement()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}fetchCourses(){"0"!==this.selectedContentArea.value?(this.selectedContentArea.text=this.contentAreas.find(n=>n.value===this.selectedContentArea.value).text,this.nweaService.getCoursesByContentAreaId(this.selectedContentArea.value).pipe((0,g.R)(this.ngUnsubscribe)).subscribe({next:n=>{this.courses=n},error:n=>{}})):this.selectedContentArea.text=""}fetchRITRanges(n,t){this.standardsMsg="Select a RIT Range",this.lessons=new Array,this.currentRitRange={};const o=c(n.target).closest(".strand-accordion").find(".collapse");c(".strand-accordion .collapse").not(o).removeClass("show");const i=c(n.target).find("i.strand-arrow"),d=i.hasClass("fa-angle-up");c("i.strand-arrow").removeClass("fa-angle-up").addClass("fa-angle-down"),d||(i.removeClass("fa-angle-down").addClass("fa-angle-up"),this._fetchRITRanges(t))}doAlert(){alert(this.additionalResourcesTranslated)}toggleRitValue(n,t){let o=0;const d=c(n.target).closest(".row").prev(),_=d.find("td.selected");d.find("td.selected").removeClass("selected"),!0===t?(o=this.currentRitRange.index+1,_.next().addClass("selected")):(o=this.currentRitRange.index-1,_.prev().addClass("selected"));const l=this.ritRanges[o];this.currentRitRange={id:l.StandardId,text:l.StandardText,index:o,isFirst:0===o,isLast:o===this.ritRanges.length-1},this._fetchLessons(l.StandardId.toString())}fetchLessons(n,t,o){const i=c(n.target);i.closest("tr").find(".selected").removeClass("selected"),i.addClass("selected");const _=this.ritRanges.find((l,z,V)=>l.StandardId===t);this.currentRitRange={id:_.StandardId,text:_.StandardText,index:o,isFirst:0===o,isLast:o===this.ritRanges.length-1},this._fetchLessons(t.toString())}_fetchContentAreas(){this.nweaService.getContentAreas().pipe((0,g.R)(this.ngUnsubscribe)).subscribe({next:n=>{this.contentAreas=n.map(t=>({text:t.Text,value:t.Value}))},error:n=>{}})}_fetchRITRanges(n){this.nweaService.getRitRangesByStrandId(n).pipe((0,g.R)(this.ngUnsubscribe)).subscribe({next:t=>{this.ritRanges=t},error:t=>{}})}additonalResourceMsg(){alert(this.additionalResourcesWithEmailTranslated)}_fetchLessons(n){this.standardsMsg="",this.nweaService.getLessonsByRitId(n).pipe((0,g.R)(this.ngUnsubscribe)).subscribe({next:t=>{this.lessons=t,0===this.lessons.length&&(this.standardsMsg=this.rangeNotApplicableTranslated);for(let o=0;o<this.lessons.length;o++)this.lessons[o].LessonContent=this.helperService.insertTargetBlanktoAnchor(this.lessons[o].LessonContent)},error:t=>{},complete:()=>{}})}_hasCourses(){return"0"!==this.selectedContentArea.value&&void 0!==this.courses&&this.courses.length>0}_hasStrands(n){return void 0!==n.Strands&&n.Strands.length>0}_hasRitRange(){return void 0!==this.currentRitRange&&void 0!==this.currentRitRange.id&&this.currentRitRange.id!==Number(0)}_hasRitRanges(){return void 0!==this.ritRanges&&this.ritRanges.length>0}_hasLessons(){return void 0!==this.lessons&&this.lessons.length>0}initiateAccordionShownElement(){c("#main_content").on("shown.bs.collapse",".lesson-accordion .card",function(){const n=c(this).children(".card-header");c("html, body").animate({scrollTop:n.offset().top},500)})}openEditNweaLessonContentModel(n){this.lesson=n,c("#edit-nwea-lesson-modal").modal("show")}saveLessonContentDetails(){this.isSaving=!0,this.nweaService.updateNweaLesson(this.lesson).pipe((0,g.R)(this.ngUnsubscribe)).subscribe({next:n=>{c("#edit-nwea-lesson-modal").modal("hide"),this.isSaving=!1,n?(this.lesson=new u,this.notifierService.showSuccessNotificationTranslated("nwea.lessonContentupdated")):this.notifierService.showErrorNotificationTranslated("nwea.unabletoupdateLessonConte")},error:n=>{this.isSaving=!1,c("#edit-nwea-lesson-modal").modal("hide"),this.notifierService.showErrorNotificationTranslated("nwea.unabletoupdateLessonConte")}})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(T),e.Y36(R.C),e.Y36(S.W),e.Y36(A.l),e.Y36(Z.N),e.Y36(f.sK))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cc-shared-nwea"]],inputs:{displayType:"displayType"},decls:40,vars:23,consts:[["id","main_content"],["id","content_title",1,"row"],[1,"text-center","col"],[1,"heading"],[1,"w-100","mt-3"],[1,"col-md-12","col-sm-12","col-xs-12"],["name","select_content_area","id","select_content_area",1,"form-control",3,"ngModel","ngModelChange","change"],["value","0","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","course-content card",4,"ngIf"],["id","edit-nwea-lesson-modal","tabindex","-1","role","dialog","aria-labelledby","document-modal",1,"modal","fade",2,"z-index","12500!important"],["role","document",1,"modal-dialog","modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"content"],[1,"lesson-panel-container"],["for","lessonContentEditor",1,"col-sm-2","p-0","col-form-label","f12","font-weight-bold"],[2,"width","100%"],["id","lessonContentEditor",3,"froalaEditor","froalaModel","froalaModelChange"],[1,"modal-footer"],["type","hidden","id","conceptChange","value","false"],["type","submit","id","save-and-close",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-save"],["type","button","id","cancel-edit-nwea-lesson-modal","data-dismiss","modal",1,"btn","btn-default",3,"disabled"],[3,"value"],[1,"course-content","card"],[1,"card-header","text-center"],[1,"card-body"],["class","card goal",4,"ngFor","ngForOf"],[1,"card","goal"],[1,"card-header","goal-header"],["class","card-body goal-body strand",3,"activeIds",4,"ngIf"],[1,"card-body","goal-body","strand",3,"activeIds"],["acc","ngbAccordion"],["class","card-header strand-header strand",3,"title","click",4,"ngFor","ngForOf"],[1,"card-header","strand-header","strand",3,"title","click"],["ngbPanelContent",""],[1,"card-body","strand-body"],[1,"rit-numbers-content"],[4,"ngIf"],["class","row",4,"ngIf"],["class","lesson-accordion",3,"id",4,"ngIf"],["class","text-center",4,"ngIf"],["class","item",3,"click",4,"ngFor","ngForOf"],[1,"item",3,"click"],["align","center","width","100%",1,"item"],[1,"row"],[1,"col-2","text-left"],[1,"col-8","text-center"],[2,"margin-bottom","20px"],[1,"col-2","text-right"],[1,"fa","fa-arrow-circle-o-left","range-arrows",3,"click"],[1,"fa","fa-arrow-circle-o-right","range-arrows",3,"click"],[1,"lesson-accordion",3,"id"],["class","card lesson",4,"ngFor","ngForOf"],[1,"card","lesson"],[1,"card-header","lesson-header",3,"id"],["href","javascript:void(0)","data-toggle","collapse","aria-expanded","true",3,"innerHtml"],["class","fa fa-pencil",3,"click",4,"ngIf"],[1,"collapse",3,"id"],[1,"card-body","lesson-body"],[3,"innerHtml"],[2,"margin-left","20px",3,"click"],[1,"fa","fa-pencil",3,"click"],[1,"text-center"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"div",4),e.TgZ(7,"div",5)(8,"select",6),e.NdJ("ngModelChange",function(i){return t.selectedContentArea.value=i})("change",function(){return t.fetchCourses()}),e.TgZ(9,"option",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,O,2,2,"option",8),e.qZA()()(),e.YNc(13,j,6,2,"div",9),e.qZA(),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"h4",14),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",15)(22,"span",16),e._uU(23,"\xd7"),e.qZA()()(),e.TgZ(24,"div",17)(25,"div",18)(26,"div",19)(27,"label",20),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",21)(31,"div",22),e.NdJ("froalaModelChange",function(i){return t.lesson.LessonContent=i}),e.qZA()()()()(),e.TgZ(32,"div",23),e._UZ(33,"input",24),e.TgZ(34,"button",25),e.NdJ("click",function(){return t.saveLessonContentDetails()}),e._UZ(35,"i",26),e._uU(36),e.qZA(),e.TgZ(37,"button",27),e._uU(38),e.ALo(39,"translate"),e.qZA()()()()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,13,"nwea.learningContinuumClassVie")),e.xp6(4),e.Q6J("ngModel",t.selectedContentArea.value),e.xp6(2),e.Oqu(e.lcZ(11,15,"nwea.selectaContentAreatoconti")),e.xp6(2),e.Q6J("ngForOf",t.contentAreas),e.xp6(1),e.Q6J("ngIf",t._hasCourses()),e.xp6(6),e.Oqu(e.lcZ(20,17,"nwea.lessonContent")),e.xp6(9),e.Oqu(e.lcZ(29,19,"nwea.lessonContent")),e.xp6(3),e.Q6J("froalaEditor",t.froalaStandardModal)("froalaModel",t.lesson.LessonContent),e.xp6(3),e.Q6J("disabled",t.isSaving),e.xp6(2),e.hij(" ",t.isSaving?"Saving":"Save and Close"," "),e.xp6(1),e.Q6J("disabled",t.isSaving),e.xp6(1),e.hij(" ",e.lcZ(39,21,"general.close")," "))},directives:[h.EJ,h.JJ,h.On,h.YN,h.Kr,m.sg,m.O5,p.gY,p.Gk,p.gW,N.Vg],pipes:[f.X$,M.y],styles:["#main_content[_ngcontent-%COMP%]{background:#f8f8f8;box-shadow:2px 2px 1em #c3c3c3 inset;color:#125da9;margin:5px;min-height:500px}#content_header[_ngcontent-%COMP%]{padding:20px}#content_title[_ngcontent-%COMP%]{margin:20px 15px;padding-top:20px}#content_title[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:20px}#content_title[_ngcontent-%COMP%]   .content-title-print[_ngcontent-%COMP%]{float:right}.course-content[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.card[_ngcontent-%COMP%]{border:none}.card-header[_ngcontent-%COMP%]{border-radius:0}.goal[_ngcontent-%COMP%]   .goal-header[_ngcontent-%COMP%]{background-color:#008752;color:#fff;padding-left:20px}.goal[_ngcontent-%COMP%]   .goal-body[_ngcontent-%COMP%]{margin:0;padding:0}.card.strand[_ngcontent-%COMP%]{margin-left:10px}.strand[_ngcontent-%COMP%]   .strand-header[_ngcontent-%COMP%]{background-color:#7ac143;color:#fff;cursor:pointer;padding-left:10px}.strand[_ngcontent-%COMP%]   .strand-body[_ngcontent-%COMP%], .strand-body[_ngcontent-%COMP%]{margin:0;padding:0}.rit-numbers-content[_ngcontent-%COMP%]{color:#fff;table-layout:fixed;width:100%}.rit-numbers-content[_ngcontent-%COMP%]   td.item[_ngcontent-%COMP%]{background-color:#3bbae7;border-right:1px solid #125da9;cursor:pointer;font-size:12px;text-align:center;width:auto}.rit-numbers-content[_ngcontent-%COMP%]   td.item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;display:block}.rit-numbers-content[_ngcontent-%COMP%]   td.item[_ngcontent-%COMP%]:hover, .rit-numbers-content[_ngcontent-%COMP%]   td.selected[_ngcontent-%COMP%]{background-color:#125da9}.range-arrows[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.lesson[_ngcontent-%COMP%]   .lesson-header[_ngcontent-%COMP%]{background-color:#0000000d;color:#125da9;cursor:pointer;font-size:12px;font-weight:700;white-space:normal}.lesson[_ngcontent-%COMP%]   .lesson-body[_ngcontent-%COMP%]{color:#000;text-align:justify}.mdModal[_ngcontent-%COMP%] > .modal-dialog[_ngcontent-%COMP%]{max-width:900px!important;min-width:800px!important;width:85%!important}@media (min-width: 768px){.modal-xl[_ngcontent-%COMP%]{width:90%;max-width:100%}}@media (min-width: 1200px){.modal-xl[_ngcontent-%COMP%]{max-width:100%}}@media (min-width: 992px){.modal-xl[_ngcontent-%COMP%]{max-width:100%}}.strand[_ngcontent-%COMP%]{margin-left:10px!important}"]}),a})()}}]);